import{b as ls,e as co,t as Ie,a as de,c as us}from"../chunks/D9Hyy9ti.js";import{o as ho}from"../chunks/DFqxoqGp.js";import{x as cs,y as hs,A as fo,B as wr,O as po,b as mo,s as cr,h as Y,D as ct,a as hn,Z as ae,a8 as go,r as _o,c as vo,d as fs,e as qr,i as Be,I as yo,f as Li,g as Oi,p as wo,an as Hr,M as Mi,ao as bo,ad as So,ap as ds,aq as Co,ar as xo,L as Po,as as ko,t as Eo,at as Ao,au as Ro,F as Ni,z as Io,a1 as hr,av as Lo,J as Oo,G as Mo,aw as No,ax as To,ay as Bo,az as Do,u as Fo,k as qo,ab as Ti,P as Ho,l as Uo,a2 as te,Q as Wo,a3 as X,a4 as we,ak as Rt,ac as Te,v as Ur}from"../chunks/CHpreZg6.js";import{d as Vo,s as Wr}from"../chunks/D7718ph-.js";import{b as Vr,i as He}from"../chunks/M7AbrWxH.js";let ps=!1;function Bi(){ps||(ps=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Go(n){var e=fo,t=wr;cs(null),hs(null);try{return n()}finally{cs(e),hs(t)}}function Jo(n,e,t,r=t){n.addEventListener(e,()=>Go(t));const s=n.__on_r;s?n.__on_r=()=>{s(),r(!0)}:n.__on_r=()=>r(!0),Bi()}function $o(n,e){return e}function jo(n,e,t,r){for(var s=[],a=e.length,c=0;c<a;c++)xo(e[c].e,s,!0);var h=a>0&&s.length===0&&t!==null;if(h){var f=t.parentNode;Po(f),f.append(t),r.clear(),Ae(n,e[0].prev,e[a-1].next)}ko(s,()=>{for(var d=0;d<a;d++){var u=e[d];h||(r.delete(u.k),Ae(n,u.prev,u.next)),Eo(u.e,!h)}})}function Ko(n,e,t,r,s,a=null){var c=n,h={flags:e,items:new Map,first:null};{var f=n;c=Y?cr(ct(f)):f.appendChild(po())}Y&&hn();var d=null,u=!1,m=go(()=>{var l=t();return Io(l)?l:l==null?[]:Mi(l)});mo(()=>{var l=ae(m),o=l.length;if(u&&o===0)return;u=o===0;let i=!1;if(Y){var p=_o(c)===vo;p!==(o===0)&&(c=fs(),cr(c),qr(!1),i=!0)}if(Y){for(var g=null,y,v=0;v<o;v++){if(Be.nodeType===8&&Be.data===yo){c=Be,i=!0,qr(!1);break}var b=l[v],_=r(b,v);y=Di(Be,h,g,null,b,_,v,s,e,t),h.items.set(_,y),g=y}o>0&&cr(fs())}Y||Xo(l,h,c,s,e,r,t),a!==null&&(o===0?d?Li(d):d=Oi(()=>a(c)):d!==null&&wo(d,()=>{d=null})),i&&qr(!0),ae(m)}),Y&&(c=Be)}function Xo(n,e,t,r,s,a,c){var h=n.length,f=e.items,d=e.first,u=d,m,l=null,o=[],i=[],p,g,y,v;for(v=0;v<h;v+=1){if(p=n[v],g=a(p,v),y=f.get(g),y===void 0){var b=u?u.e.nodes_start:t;l=Di(b,e,l,l===null?e.first:l.next,p,g,v,r,s,c),f.set(g,l),o=[],i=[],u=l.next;continue}if(Qo(y,p,v),(y.e.f&Hr)!==0&&Li(y.e),y!==u){if(m!==void 0&&m.has(y)){if(o.length<i.length){var _=i[0],w;l=_.prev;var S=o[0],C=o[o.length-1];for(w=0;w<o.length;w+=1)ms(o[w],_,t);for(w=0;w<i.length;w+=1)m.delete(i[w]);Ae(e,S.prev,C.next),Ae(e,l,S),Ae(e,C,_),u=_,l=C,v-=1,o=[],i=[]}else m.delete(y),ms(y,u,t),Ae(e,y.prev,y.next),Ae(e,y,l===null?e.first:l.next),Ae(e,l,y),l=y;continue}for(o=[],i=[];u!==null&&u.k!==g;)(u.e.f&Hr)===0&&(m??(m=new Set)).add(u),i.push(u),u=u.next;if(u===null)continue;y=u}o.push(y),l=y,u=y.next}if(u!==null||m!==void 0){for(var k=m===void 0?[]:Mi(m);u!==null;)(u.e.f&Hr)===0&&k.push(u),u=u.next;var A=k.length;if(A>0){var P=h===0?t:null;jo(e,k,P,f)}}wr.first=e.first&&e.first.e,wr.last=l&&l.e}function Qo(n,e,t,r){bo(n.v,e),n.i=t}function Di(n,e,t,r,s,a,c,h,f,d){var u=(f&Ao)!==0,m=(f&Ro)===0,l=u?m?So(s):ds(s):s,o=(f&Co)===0?c:ds(c),i={i:o,v:l,k:a,a:null,e:null,prev:t,next:r};try{return i.e=Oi(()=>h(n,l,o,d),Y),i.e.prev=t&&t.e,i.e.next=r&&r.e,t===null?e.first=i:(t.next=i,t.e.next=i.e),r!==null&&(r.prev=i,r.e.prev=i.e),i}finally{}}function ms(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,s=e?e.e.nodes_start:t,a=n.e.nodes_start;a!==r;){var c=Ni(a);s.before(a),a=c}}function Ae(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function zo(n,e,t=!1,r=!1,s=!1){var a=n,c="";hr(()=>{var h=wr;if(c===(c=e()??"")){Y&&hn();return}if(h.nodes_start!==null&&(Lo(h.nodes_start,h.nodes_end),h.nodes_start=h.nodes_end=null),c!==""){if(Y){Be.data;for(var f=hn(),d=f;f!==null&&(f.nodeType!==8||f.data!=="");)d=f,f=Ni(f);if(f===null)throw Oo(),Mo;ls(Be,d),a=cr(f);return}var u=c+"";t?u=`<svg>${u}</svg>`:r&&(u=`<math>${u}</math>`);var m=co(u);if((t||r)&&(m=ct(m)),ls(ct(m),m.lastChild),t||r)for(;ct(m);)a.before(ct(m));else a.before(m)}})}const gs=[...` 	
\r\fÂ \v\uFEFF`];function Yo(n,e,t){var r=""+n;if(t){for(var s in t)if(t[s])r=r?r+" "+s:s;else if(r.length)for(var a=s.length,c=0;(c=r.indexOf(s,c))>=0;){var h=c+a;(c===0||gs.includes(r[c-1]))&&(h===r.length||gs.includes(r[h]))?r=(c===0?"":r.substring(0,c))+r.substring(h+1):c=h}}return r===""?null:r}function _s(n,e,t,r,s,a){var c=n.__className;if(Y||c!==t||c===void 0){var h=Yo(t,r,a);(!Y||h!==n.getAttribute("class"))&&(h==null?n.removeAttribute("class"):n.className=h),n.__className=t}else if(a&&s!==a)for(var f in a){var d=!!a[f];(s==null||d!==!!s[f])&&n.classList.toggle(f,d)}return a}const Zo=Symbol("is custom element"),el=Symbol("is html");function tl(n){if(Y){var e=!1,t=()=>{if(!e){if(e=!0,n.hasAttribute("value")){var r=n.value;vs(n,"value",null),n.value=r}if(n.hasAttribute("checked")){var s=n.checked;vs(n,"checked",null),n.checked=s}}};n.__on_r=t,No(t),Bi()}}function vs(n,e,t,r){var s=rl(n);Y&&(s[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||s[e]!==(s[e]=t)&&(e==="loading"&&(n[To]=t),n.removeAttribute(e))}function rl(n){return n.__attributes??(n.__attributes={[Zo]:n.nodeName.includes("-"),[el]:n.namespaceURI===Bo})}function nl(n,e,t=e){var r=Do();Jo(n,"input",s=>{var a=s?n.defaultValue:n.value;if(a=Gr(n)?Jr(a):a,t(a),r&&a!==(a=e())){var c=n.selectionStart,h=n.selectionEnd;n.value=a??"",h!==null&&(n.selectionStart=c,n.selectionEnd=Math.min(h,n.value.length))}}),(Y&&n.defaultValue!==n.value||Fo(e)==null&&n.value)&&t(Gr(n)?Jr(n.value):n.value),qo(()=>{var s=e();Gr(n)&&s===Jr(n.value)||n.type==="date"&&!s&&!n.value||s!==n.value&&(n.value=s??"")})}function Gr(n){var e=n.type;return e==="number"||e==="range"}function Jr(n){return n===""?null:+n}function sl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var It={exports:{}},Lt={exports:{}},le={},Q={},ys;function Z(){if(ys)return Q;ys=1,Q.__esModule=!0,Q.extend=s,Q.indexOf=f,Q.escapeExpression=d,Q.isEmpty=u,Q.createFrame=m,Q.blockParams=l,Q.appendContextPath=o;var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},e=/[&<>"'`=]/g,t=/[&<>"'`=]/;function r(i){return n[i]}function s(i){for(var p=1;p<arguments.length;p++)for(var g in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],g)&&(i[g]=arguments[p][g]);return i}var a=Object.prototype.toString;Q.toString=a;var c=function(p){return typeof p=="function"};c(/x/)&&(Q.isFunction=c=function(i){return typeof i=="function"&&a.call(i)==="[object Function]"}),Q.isFunction=c;var h=Array.isArray||function(i){return i&&typeof i=="object"?a.call(i)==="[object Array]":!1};Q.isArray=h;function f(i,p){for(var g=0,y=i.length;g<y;g++)if(i[g]===p)return g;return-1}function d(i){if(typeof i!="string"){if(i&&i.toHTML)return i.toHTML();if(i==null)return"";if(!i)return i+"";i=""+i}return t.test(i)?i.replace(e,r):i}function u(i){return!i&&i!==0?!0:!!(h(i)&&i.length===0)}function m(i){var p=s({},i);return p._parent=i,p}function l(i,p){return i.path=p,i}function o(i,p){return(i?i+".":"")+p}return Q}var Ot={exports:{}},ws;function fe(){return ws||(ws=1,function(n,e){e.__esModule=!0;var t=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(s,a){var c=a&&a.loc,h=void 0,f=void 0,d=void 0,u=void 0;c&&(h=c.start.line,f=c.end.line,d=c.start.column,u=c.end.column,s+=" - "+h+":"+d);for(var m=Error.prototype.constructor.call(this,s),l=0;l<t.length;l++)this[t[l]]=m[t[l]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{c&&(this.lineNumber=h,this.endLineNumber=f,Object.defineProperty?(Object.defineProperty(this,"column",{value:d,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=d,this.endColumn=u))}catch{}}r.prototype=new Error,e.default=r,n.exports=e.default}(Ot,Ot.exports)),Ot.exports}var ot={},Mt={exports:{}},bs;function il(){return bs||(bs=1,function(n,e){e.__esModule=!0;var t=Z();e.default=function(r){r.registerHelper("blockHelperMissing",function(s,a){var c=a.inverse,h=a.fn;if(s===!0)return h(this);if(s===!1||s==null)return c(this);if(t.isArray(s))return s.length>0?(a.ids&&(a.ids=[a.name]),r.helpers.each(s,a)):c(this);if(a.data&&a.ids){var f=t.createFrame(a.data);f.contextPath=t.appendContextPath(a.data.contextPath,a.name),a={data:f}}return h(s,a)})},n.exports=e.default}(Mt,Mt.exports)),Mt.exports}var Nt={exports:{}},Ss;function al(){return Ss||(Ss=1,function(n,e){e.__esModule=!0;function t(c){return c&&c.__esModule?c:{default:c}}var r=Z(),s=fe(),a=t(s);e.default=function(c){c.registerHelper("each",function(h,f){if(!f)throw new a.default("Must pass iterator to #each");var d=f.fn,u=f.inverse,m=0,l="",o=void 0,i=void 0;f.data&&f.ids&&(i=r.appendContextPath(f.data.contextPath,f.ids[0])+"."),r.isFunction(h)&&(h=h.call(this)),f.data&&(o=r.createFrame(f.data));function p(_,w,S){o&&(o.key=_,o.index=w,o.first=w===0,o.last=!!S,i&&(o.contextPath=i+_)),l=l+d(h[_],{data:o,blockParams:r.blockParams([h[_],_],[i+_,null])})}if(h&&typeof h=="object")if(r.isArray(h))for(var g=h.length;m<g;m++)m in h&&p(m,m,m===h.length-1);else if(typeof Symbol=="function"&&h[Symbol.iterator]){for(var y=[],v=h[Symbol.iterator](),b=v.next();!b.done;b=v.next())y.push(b.value);h=y;for(var g=h.length;m<g;m++)p(m,m,m===h.length-1)}else(function(){var _=void 0;Object.keys(h).forEach(function(w){_!==void 0&&p(_,m-1),_=w,m++}),_!==void 0&&p(_,m-1,!0)})();return m===0&&(l=u(this)),l})},n.exports=e.default}(Nt,Nt.exports)),Nt.exports}var Tt={exports:{}},Cs;function ol(){return Cs||(Cs=1,function(n,e){e.__esModule=!0;function t(a){return a&&a.__esModule?a:{default:a}}var r=fe(),s=t(r);e.default=function(a){a.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},n.exports=e.default}(Tt,Tt.exports)),Tt.exports}var Bt={exports:{}},xs;function ll(){return xs||(xs=1,function(n,e){e.__esModule=!0;function t(c){return c&&c.__esModule?c:{default:c}}var r=Z(),s=fe(),a=t(s);e.default=function(c){c.registerHelper("if",function(h,f){if(arguments.length!=2)throw new a.default("#if requires exactly one argument");return r.isFunction(h)&&(h=h.call(this)),!f.hash.includeZero&&!h||r.isEmpty(h)?f.inverse(this):f.fn(this)}),c.registerHelper("unless",function(h,f){if(arguments.length!=2)throw new a.default("#unless requires exactly one argument");return c.helpers.if.call(this,h,{fn:f.inverse,inverse:f.fn,hash:f.hash})})},n.exports=e.default}(Bt,Bt.exports)),Bt.exports}var Dt={exports:{}},Ps;function ul(){return Ps||(Ps=1,function(n,e){e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var r=[void 0],s=arguments[arguments.length-1],a=0;a<arguments.length-1;a++)r.push(arguments[a]);var c=1;s.hash.level!=null?c=s.hash.level:s.data&&s.data.level!=null&&(c=s.data.level),r[0]=c,t.log.apply(t,r)})},n.exports=e.default}(Dt,Dt.exports)),Dt.exports}var Ft={exports:{}},ks;function cl(){return ks||(ks=1,function(n,e){e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(r,s,a){return r&&a.lookupProperty(r,s)})},n.exports=e.default}(Ft,Ft.exports)),Ft.exports}var qt={exports:{}},Es;function hl(){return Es||(Es=1,function(n,e){e.__esModule=!0;function t(c){return c&&c.__esModule?c:{default:c}}var r=Z(),s=fe(),a=t(s);e.default=function(c){c.registerHelper("with",function(h,f){if(arguments.length!=2)throw new a.default("#with requires exactly one argument");r.isFunction(h)&&(h=h.call(this));var d=f.fn;if(r.isEmpty(h))return f.inverse(this);var u=f.data;return f.data&&f.ids&&(u=r.createFrame(f.data),u.contextPath=r.appendContextPath(f.data.contextPath,f.ids[0])),d(h,{data:u,blockParams:r.blockParams([h],[u&&u.contextPath])})})},n.exports=e.default}(qt,qt.exports)),qt.exports}var As;function Fi(){if(As)return ot;As=1,ot.__esModule=!0,ot.registerDefaultHelpers=p,ot.moveHelperToHooks=g;function n(y){return y&&y.__esModule?y:{default:y}}var e=il(),t=n(e),r=al(),s=n(r),a=ol(),c=n(a),h=ll(),f=n(h),d=ul(),u=n(d),m=cl(),l=n(m),o=hl(),i=n(o);function p(y){t.default(y),s.default(y),c.default(y),f.default(y),u.default(y),l.default(y),i.default(y)}function g(y,v,b){y.helpers[v]&&(y.hooks[v]=y.helpers[v],b||delete y.helpers[v])}return ot}var Ht={},Ut={exports:{}},Rs;function fl(){return Rs||(Rs=1,function(n,e){e.__esModule=!0;var t=Z();e.default=function(r){r.registerDecorator("inline",function(s,a,c,h){var f=s;return a.partials||(a.partials={},f=function(d,u){var m=c.partials;c.partials=t.extend({},m,a.partials);var l=s(d,u);return c.partials=m,l}),a.partials[h.args[0]]=h.fn,f})},n.exports=e.default}(Ut,Ut.exports)),Ut.exports}var Is;function dl(){if(Is)return Ht;Is=1,Ht.__esModule=!0,Ht.registerDefaultDecorators=r;function n(s){return s&&s.__esModule?s:{default:s}}var e=fl(),t=n(e);function r(s){t.default(s)}return Ht}var Wt={exports:{}},Ls;function qi(){return Ls||(Ls=1,function(n,e){e.__esModule=!0;var t=Z(),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if(typeof a=="string"){var c=t.indexOf(r.methodMap,a.toLowerCase());c>=0?a=c:a=parseInt(a,10)}return a},log:function(a){if(a=r.lookupLevel(a),typeof console<"u"&&r.lookupLevel(r.level)<=a){var c=r.methodMap[a];console[c]||(c="log");for(var h=arguments.length,f=Array(h>1?h-1:0),d=1;d<h;d++)f[d-1]=arguments[d];console[c].apply(console,f)}}};e.default=r,n.exports=e.default}(Wt,Wt.exports)),Wt.exports}var Ue={},Vt={},Os;function pl(){if(Os)return Vt;Os=1,Vt.__esModule=!0,Vt.createNewLookupObject=e;var n=Z();function e(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];return n.extend.apply(void 0,[Object.create(null)].concat(r))}return Vt}var Ms;function Hi(){if(Ms)return Ue;Ms=1,Ue.__esModule=!0,Ue.createProtoAccessControl=a,Ue.resultIsAllowed=c,Ue.resetLoggedProperties=d;function n(u){return u&&u.__esModule?u:{default:u}}var e=pl(),t=qi(),r=n(t),s=Object.create(null);function a(u){var m=Object.create(null);m.constructor=!1,m.__defineGetter__=!1,m.__defineSetter__=!1,m.__lookupGetter__=!1;var l=Object.create(null);return l.__proto__=!1,{properties:{whitelist:e.createNewLookupObject(l,u.allowedProtoProperties),defaultValue:u.allowProtoPropertiesByDefault},methods:{whitelist:e.createNewLookupObject(m,u.allowedProtoMethods),defaultValue:u.allowProtoMethodsByDefault}}}function c(u,m,l){return h(typeof u=="function"?m.methods:m.properties,l)}function h(u,m){return u.whitelist[m]!==void 0?u.whitelist[m]===!0:u.defaultValue!==void 0?u.defaultValue:(f(m),!1)}function f(u){s[u]!==!0&&(s[u]=!0,r.default.log("error",'Handlebars: Access has been denied to resolve the property "'+u+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}function d(){Object.keys(s).forEach(function(u){delete s[u]})}return Ue}var Ns;function Pn(){if(Ns)return le;Ns=1,le.__esModule=!0,le.HandlebarsEnvironment=i;function n(g){return g&&g.__esModule?g:{default:g}}var e=Z(),t=fe(),r=n(t),s=Fi(),a=dl(),c=qi(),h=n(c),f=Hi(),d="4.7.8";le.VERSION=d;var u=8;le.COMPILER_REVISION=u;var m=7;le.LAST_COMPATIBLE_COMPILER_REVISION=m;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};le.REVISION_CHANGES=l;var o="[object Object]";function i(g,y,v){this.helpers=g||{},this.partials=y||{},this.decorators=v||{},s.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}i.prototype={constructor:i,logger:h.default,log:h.default.log,registerHelper:function(y,v){if(e.toString.call(y)===o){if(v)throw new r.default("Arg not supported with multiple helpers");e.extend(this.helpers,y)}else this.helpers[y]=v},unregisterHelper:function(y){delete this.helpers[y]},registerPartial:function(y,v){if(e.toString.call(y)===o)e.extend(this.partials,y);else{if(typeof v>"u")throw new r.default('Attempting to register a partial called "'+y+'" as undefined');this.partials[y]=v}},unregisterPartial:function(y){delete this.partials[y]},registerDecorator:function(y,v){if(e.toString.call(y)===o){if(v)throw new r.default("Arg not supported with multiple decorators");e.extend(this.decorators,y)}else this.decorators[y]=v},unregisterDecorator:function(y){delete this.decorators[y]},resetLoggedPropertyAccesses:function(){f.resetLoggedProperties()}};var p=h.default.log;return le.log=p,le.createFrame=e.createFrame,le.logger=h.default,le}var Gt={exports:{}},Ts;function ml(){return Ts||(Ts=1,function(n,e){e.__esModule=!0;function t(r){this.string=r}t.prototype.toString=t.prototype.toHTML=function(){return""+this.string},e.default=t,n.exports=e.default}(Gt,Gt.exports)),Gt.exports}var be={},Jt={},Bs;function gl(){if(Bs)return Jt;Bs=1,Jt.__esModule=!0,Jt.wrapHelper=n;function n(e,t){if(typeof e!="function")return e;var r=function(){var a=arguments[arguments.length-1];return arguments[arguments.length-1]=t(a),e.apply(this,arguments)};return r}return Jt}var Ds;function _l(){if(Ds)return be;Ds=1,be.__esModule=!0,be.checkRevision=u,be.template=m,be.wrapProgram=l,be.resolvePartial=o,be.invokePartial=i,be.noop=p;function n(_){return _&&_.__esModule?_:{default:_}}function e(_){if(_&&_.__esModule)return _;var w={};if(_!=null)for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(w[S]=_[S]);return w.default=_,w}var t=Z(),r=e(t),s=fe(),a=n(s),c=Pn(),h=Fi(),f=gl(),d=Hi();function u(_){var w=_&&_[0]||1,S=c.COMPILER_REVISION;if(!(w>=c.LAST_COMPATIBLE_COMPILER_REVISION&&w<=c.COMPILER_REVISION))if(w<c.LAST_COMPATIBLE_COMPILER_REVISION){var C=c.REVISION_CHANGES[S],k=c.REVISION_CHANGES[w];throw new a.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+C+") or downgrade your runtime to an older version ("+k+").")}else throw new a.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+_[1]+").")}function m(_,w){if(!w)throw new a.default("No environment passed to template");if(!_||!_.main)throw new a.default("Unknown template object: "+typeof _);_.main.decorator=_.main_d,w.VM.checkRevision(_.compiler);var S=_.compiler&&_.compiler[0]===7;function C(P,x,E){E.hash&&(x=r.extend({},x,E.hash),E.ids&&(E.ids[0]=!0)),P=w.VM.resolvePartial.call(this,P,x,E);var N=r.extend({},E,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),I=w.VM.invokePartial.call(this,P,x,N);if(I==null&&w.compile&&(E.partials[E.name]=w.compile(P,_.compilerOptions,w),I=E.partials[E.name](x,N)),I!=null){if(E.indent){for(var T=I.split(`
`),F=0,ee=T.length;F<ee&&!(!T[F]&&F+1===ee);F++)T[F]=E.indent+T[F];I=T.join(`
`)}return I}else throw new a.default("The partial "+E.name+" could not be compiled when running in runtime-only mode")}var k={strict:function(x,E,N){if(!x||!(E in x))throw new a.default('"'+E+'" not defined in '+x,{loc:N});return k.lookupProperty(x,E)},lookupProperty:function(x,E){var N=x[E];if(N==null||Object.prototype.hasOwnProperty.call(x,E)||d.resultIsAllowed(N,k.protoAccessControl,E))return N},lookup:function(x,E){for(var N=x.length,I=0;I<N;I++){var T=x[I]&&k.lookupProperty(x[I],E);if(T!=null)return x[I][E]}},lambda:function(x,E){return typeof x=="function"?x.call(E):x},escapeExpression:r.escapeExpression,invokePartial:C,fn:function(x){var E=_[x];return E.decorator=_[x+"_d"],E},programs:[],program:function(x,E,N,I,T){var F=this.programs[x],ee=this.fn(x);return E||T||I||N?F=l(this,x,ee,E,N,I,T):F||(F=this.programs[x]=l(this,x,ee)),F},data:function(x,E){for(;x&&E--;)x=x._parent;return x},mergeIfNeeded:function(x,E){var N=x||E;return x&&E&&x!==E&&(N=r.extend({},E,x)),N},nullContext:Object.seal({}),noop:w.VM.noop,compilerInfo:_.compiler};function A(P){var x=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],E=x.data;A._setup(x),!x.partial&&_.useData&&(E=g(P,E));var N=void 0,I=_.useBlockParams?[]:void 0;_.useDepths&&(x.depths?N=P!=x.depths[0]?[P].concat(x.depths):x.depths:N=[P]);function T(F){return""+_.main(k,F,k.helpers,k.partials,E,I,N)}return T=y(_.main,T,k,x.depths||[],E,I),T(P,x)}return A.isTop=!0,A._setup=function(P){if(P.partial)k.protoAccessControl=P.protoAccessControl,k.helpers=P.helpers,k.partials=P.partials,k.decorators=P.decorators,k.hooks=P.hooks;else{var x=r.extend({},w.helpers,P.helpers);v(x,k),k.helpers=x,_.usePartial&&(k.partials=k.mergeIfNeeded(P.partials,w.partials)),(_.usePartial||_.useDecorators)&&(k.decorators=r.extend({},w.decorators,P.decorators)),k.hooks={},k.protoAccessControl=d.createProtoAccessControl(P);var E=P.allowCallsToHelperMissing||S;h.moveHelperToHooks(k,"helperMissing",E),h.moveHelperToHooks(k,"blockHelperMissing",E)}},A._child=function(P,x,E,N){if(_.useBlockParams&&!E)throw new a.default("must pass block params");if(_.useDepths&&!N)throw new a.default("must pass parent depths");return l(k,P,_[P],x,0,E,N)},A}function l(_,w,S,C,k,A,P){function x(E){var N=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],I=P;return P&&E!=P[0]&&!(E===_.nullContext&&P[0]===null)&&(I=[E].concat(P)),S(_,E,_.helpers,_.partials,N.data||C,A&&[N.blockParams].concat(A),I)}return x=y(S,x,_,P,C,A),x.program=w,x.depth=P?P.length:0,x.blockParams=k||0,x}function o(_,w,S){return _?!_.call&&!S.name&&(S.name=_,_=S.partials[_]):S.name==="@partial-block"?_=S.data["partial-block"]:_=S.partials[S.name],_}function i(_,w,S){var C=S.data&&S.data["partial-block"];S.partial=!0,S.ids&&(S.data.contextPath=S.ids[0]||S.data.contextPath);var k=void 0;if(S.fn&&S.fn!==p&&function(){S.data=c.createFrame(S.data);var A=S.fn;k=S.data["partial-block"]=function(x){var E=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return E.data=c.createFrame(E.data),E.data["partial-block"]=C,A(x,E)},A.partials&&(S.partials=r.extend({},S.partials,A.partials))}(),_===void 0&&k&&(_=k),_===void 0)throw new a.default("The partial "+S.name+" could not be found");if(_ instanceof Function)return _(w,S)}function p(){return""}function g(_,w){return(!w||!("root"in w))&&(w=w?c.createFrame(w):{},w.root=_),w}function y(_,w,S,C,k,A){if(_.decorator){var P={};w=_.decorator(w,P,S,C&&C[0],k,A,C),r.extend(w,P)}return w}function v(_,w){Object.keys(_).forEach(function(S){var C=_[S];_[S]=b(C,w)})}function b(_,w){var S=w.lookupProperty;return f.wrapHelper(_,function(C){return r.extend({lookupProperty:S},C)})}return be}var $t={exports:{}},Fs;function Ui(){return Fs||(Fs=1,function(n,e){e.__esModule=!0,e.default=function(t){(function(){typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();var r=globalThis.Handlebars;t.noConflict=function(){return globalThis.Handlebars===t&&(globalThis.Handlebars=r),t}},n.exports=e.default}($t,$t.exports)),$t.exports}var qs;function vl(){return qs||(qs=1,function(n,e){e.__esModule=!0;function t(v){return v&&v.__esModule?v:{default:v}}function r(v){if(v&&v.__esModule)return v;var b={};if(v!=null)for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(b[_]=v[_]);return b.default=v,b}var s=Pn(),a=r(s),c=ml(),h=t(c),f=fe(),d=t(f),u=Z(),m=r(u),l=_l(),o=r(l),i=Ui(),p=t(i);function g(){var v=new a.HandlebarsEnvironment;return m.extend(v,a),v.SafeString=h.default,v.Exception=d.default,v.Utils=m,v.escapeExpression=m.escapeExpression,v.VM=o,v.template=function(b){return o.template(b,v)},v}var y=g();y.create=g,p.default(y),y.default=y,e.default=y,n.exports=e.default}(Lt,Lt.exports)),Lt.exports}var jt={exports:{}},Hs;function Wi(){return Hs||(Hs=1,function(n,e){e.__esModule=!0;var t={helpers:{helperExpression:function(s){return s.type==="SubExpression"||(s.type==="MustacheStatement"||s.type==="BlockStatement")&&!!(s.params&&s.params.length||s.hash)},scopedId:function(s){return/^\.|this\b/.test(s.original)},simpleId:function(s){return s.parts.length===1&&!t.helpers.scopedId(s)&&!s.depth}}};e.default=t,n.exports=e.default}(jt,jt.exports)),jt.exports}var We={},Kt={exports:{}},Us;function yl(){return Us||(Us=1,function(n,e){e.__esModule=!0;var t=function(){var r={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(h,f,d,u,m,l,o){var i=l.length-1;switch(m){case 1:return l[i-1];case 2:this.$=u.prepareProgram(l[i]);break;case 3:this.$=l[i];break;case 4:this.$=l[i];break;case 5:this.$=l[i];break;case 6:this.$=l[i];break;case 7:this.$=l[i];break;case 8:this.$=l[i];break;case 9:this.$={type:"CommentStatement",value:u.stripComment(l[i]),strip:u.stripFlags(l[i],l[i]),loc:u.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:l[i],value:l[i],loc:u.locInfo(this._$)};break;case 11:this.$=u.prepareRawBlock(l[i-2],l[i-1],l[i],this._$);break;case 12:this.$={path:l[i-3],params:l[i-2],hash:l[i-1]};break;case 13:this.$=u.prepareBlock(l[i-3],l[i-2],l[i-1],l[i],!1,this._$);break;case 14:this.$=u.prepareBlock(l[i-3],l[i-2],l[i-1],l[i],!0,this._$);break;case 15:this.$={open:l[i-5],path:l[i-4],params:l[i-3],hash:l[i-2],blockParams:l[i-1],strip:u.stripFlags(l[i-5],l[i])};break;case 16:this.$={path:l[i-4],params:l[i-3],hash:l[i-2],blockParams:l[i-1],strip:u.stripFlags(l[i-5],l[i])};break;case 17:this.$={path:l[i-4],params:l[i-3],hash:l[i-2],blockParams:l[i-1],strip:u.stripFlags(l[i-5],l[i])};break;case 18:this.$={strip:u.stripFlags(l[i-1],l[i-1]),program:l[i]};break;case 19:var p=u.prepareBlock(l[i-2],l[i-1],l[i],l[i],!1,this._$),g=u.prepareProgram([p],l[i-1].loc);g.chained=!0,this.$={strip:l[i-2].strip,program:g,chain:!0};break;case 20:this.$=l[i];break;case 21:this.$={path:l[i-1],strip:u.stripFlags(l[i-2],l[i])};break;case 22:this.$=u.prepareMustache(l[i-3],l[i-2],l[i-1],l[i-4],u.stripFlags(l[i-4],l[i]),this._$);break;case 23:this.$=u.prepareMustache(l[i-3],l[i-2],l[i-1],l[i-4],u.stripFlags(l[i-4],l[i]),this._$);break;case 24:this.$={type:"PartialStatement",name:l[i-3],params:l[i-2],hash:l[i-1],indent:"",strip:u.stripFlags(l[i-4],l[i]),loc:u.locInfo(this._$)};break;case 25:this.$=u.preparePartialBlock(l[i-2],l[i-1],l[i],this._$);break;case 26:this.$={path:l[i-3],params:l[i-2],hash:l[i-1],strip:u.stripFlags(l[i-4],l[i])};break;case 27:this.$=l[i];break;case 28:this.$=l[i];break;case 29:this.$={type:"SubExpression",path:l[i-3],params:l[i-2],hash:l[i-1],loc:u.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:l[i],loc:u.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:u.id(l[i-2]),value:l[i],loc:u.locInfo(this._$)};break;case 32:this.$=u.id(l[i-1]);break;case 33:this.$=l[i];break;case 34:this.$=l[i];break;case 35:this.$={type:"StringLiteral",value:l[i],original:l[i],loc:u.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(l[i]),original:Number(l[i]),loc:u.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:l[i]==="true",original:l[i]==="true",loc:u.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:u.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:u.locInfo(this._$)};break;case 40:this.$=l[i];break;case 41:this.$=l[i];break;case 42:this.$=u.preparePath(!0,l[i],this._$);break;case 43:this.$=u.preparePath(!1,l[i],this._$);break;case 44:l[i-2].push({part:u.id(l[i]),original:l[i],separator:l[i-1]}),this.$=l[i-2];break;case 45:this.$=[{part:u.id(l[i]),original:l[i]}];break;case 46:this.$=[];break;case 47:l[i-1].push(l[i]);break;case 48:this.$=[];break;case 49:l[i-1].push(l[i]);break;case 50:this.$=[];break;case 51:l[i-1].push(l[i]);break;case 58:this.$=[];break;case 59:l[i-1].push(l[i]);break;case 64:this.$=[];break;case 65:l[i-1].push(l[i]);break;case 70:this.$=[];break;case 71:l[i-1].push(l[i]);break;case 78:this.$=[];break;case 79:l[i-1].push(l[i]);break;case 82:this.$=[];break;case 83:l[i-1].push(l[i]);break;case 86:this.$=[];break;case 87:l[i-1].push(l[i]);break;case 90:this.$=[];break;case 91:l[i-1].push(l[i]);break;case 94:this.$=[];break;case 95:l[i-1].push(l[i]);break;case 98:this.$=[l[i]];break;case 99:l[i-1].push(l[i]);break;case 100:this.$=[l[i]];break;case 101:l[i-1].push(l[i]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(h,f){throw new Error(h)},parse:function(h){var f=this,d=[0],u=[null],m=[],l=this.table,o="",i=0,p=0;this.lexer.setInput(h),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var g=this.lexer.yylloc;m.push(g);var y=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function v(){var N;return N=f.lexer.lex()||1,typeof N!="number"&&(N=f.symbols_[N]||N),N}for(var b,_,w,S,C={},k,A,P,x;;){if(_=d[d.length-1],this.defaultActions[_]?w=this.defaultActions[_]:((b===null||typeof b>"u")&&(b=v()),w=l[_]&&l[_][b]),typeof w>"u"||!w.length||!w[0]){var E="";{x=[];for(k in l[_])this.terminals_[k]&&k>2&&x.push("'"+this.terminals_[k]+"'");this.lexer.showPosition?E="Parse error on line "+(i+1)+`:
`+this.lexer.showPosition()+`
Expecting `+x.join(", ")+", got '"+(this.terminals_[b]||b)+"'":E="Parse error on line "+(i+1)+": Unexpected "+(b==1?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[b]||b,line:this.lexer.yylineno,loc:g,expected:x})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_+", token: "+b);switch(w[0]){case 1:d.push(b),u.push(this.lexer.yytext),m.push(this.lexer.yylloc),d.push(w[1]),b=null,p=this.lexer.yyleng,o=this.lexer.yytext,i=this.lexer.yylineno,g=this.lexer.yylloc;break;case 2:if(A=this.productions_[w[1]][1],C.$=u[u.length-A],C._$={first_line:m[m.length-(A||1)].first_line,last_line:m[m.length-1].last_line,first_column:m[m.length-(A||1)].first_column,last_column:m[m.length-1].last_column},y&&(C._$.range=[m[m.length-(A||1)].range[0],m[m.length-1].range[1]]),S=this.performAction.call(C,o,p,i,this.yy,w[1],u,m),typeof S<"u")return S;A&&(d=d.slice(0,-1*A*2),u=u.slice(0,-1*A),m=m.slice(0,-1*A)),d.push(this.productions_[w[1]][0]),u.push(C.$),m.push(C._$),P=l[d[d.length-2]][d[d.length-1]],d.push(P);break;case 3:return!0}}return!0}},s=function(){var c={EOF:1,parseError:function(f,d){if(this.yy.parser)this.yy.parser.parseError(f,d);else throw new Error(f)},setInput:function(f){return this._input=f,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var f=this._input[0];this.yytext+=f,this.yyleng++,this.offset++,this.match+=f,this.matched+=f;var d=f.match(/(?:\r\n?|\n).*/g);return d?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),f},unput:function(f){var d=f.length,u=f.split(/(?:\r\n?|\n)/g);this._input=f+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-d-1),this.offset-=d;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),u.length-1&&(this.yylineno-=u.length-1);var l=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===m.length?this.yylloc.first_column:0)+m[m.length-u.length].length-u[0].length:this.yylloc.first_column-d},this.options.ranges&&(this.yylloc.range=[l[0],l[0]+this.yyleng-d]),this},more:function(){return this._more=!0,this},less:function(f){this.unput(this.match.slice(f))},pastInput:function(){var f=this.matched.substr(0,this.matched.length-this.match.length);return(f.length>20?"...":"")+f.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var f=this.match;return f.length<20&&(f+=this._input.substr(0,20-f.length)),(f.substr(0,20)+(f.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var f=this.pastInput(),d=new Array(f.length+1).join("-");return f+this.upcomingInput()+`
`+d+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var f,d,u,m,l;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),i=0;i<o.length&&(u=this._input.match(this.rules[o[i]]),!(u&&(!d||u[0].length>d[0].length)&&(d=u,m=i,!this.options.flex)));i++);return d?(l=d[0].match(/(?:\r\n?|\n).*/g),l&&(this.yylineno+=l.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:l?l[l.length-1].length-l[l.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+d[0].length},this.yytext+=d[0],this.match+=d[0],this.matches=d,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(d[0].length),this.matched+=d[0],f=this.performAction.call(this,this.yy,this,o[m],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),f||void 0):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var f=this.next();return typeof f<"u"?f:this.lex()},begin:function(f){this.conditionStack.push(f)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(f){this.begin(f)}};return c.options={},c.performAction=function(f,d,u,m){function l(o,i){return d.yytext=d.yytext.substring(o,d.yyleng-i+o)}switch(u){case 0:if(d.yytext.slice(-2)==="\\\\"?(l(0,1),this.begin("mu")):d.yytext.slice(-1)==="\\"?(l(0,1),this.begin("emu")):this.begin("mu"),d.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw"?15:(l(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(d.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return d.yytext=l(1,2).replace(/\\"/g,'"'),80;case 32:return d.yytext=l(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return d.yytext=d.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},c.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],c.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},c}();r.lexer=s;function a(){this.yy={}}return a.prototype=r,r.Parser=a,new a}();e.default=t,n.exports=e.default}(Kt,Kt.exports)),Kt.exports}var Xt={exports:{}},Qt={exports:{}},Ws;function Vi(){return Ws||(Ws=1,function(n,e){e.__esModule=!0;function t(d){return d&&d.__esModule?d:{default:d}}var r=fe(),s=t(r);function a(){this.parents=[]}a.prototype={constructor:a,mutating:!1,acceptKey:function(u,m){var l=this.accept(u[m]);if(this.mutating){if(l&&!a.prototype[l.type])throw new s.default('Unexpected node type "'+l.type+'" found when accepting '+m+" on "+u.type);u[m]=l}},acceptRequired:function(u,m){if(this.acceptKey(u,m),!u[m])throw new s.default(u.type+" requires "+m)},acceptArray:function(u){for(var m=0,l=u.length;m<l;m++)this.acceptKey(u,m),u[m]||(u.splice(m,1),m--,l--)},accept:function(u){if(u){if(!this[u.type])throw new s.default("Unknown type: "+u.type,u);this.current&&this.parents.unshift(this.current),this.current=u;var m=this[u.type](u);if(this.current=this.parents.shift(),!this.mutating||m)return m;if(m!==!1)return u}},Program:function(u){this.acceptArray(u.body)},MustacheStatement:c,Decorator:c,BlockStatement:h,DecoratorBlock:h,PartialStatement:f,PartialBlockStatement:function(u){f.call(this,u),this.acceptKey(u,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:c,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(u){this.acceptArray(u.pairs)},HashPair:function(u){this.acceptRequired(u,"value")}};function c(d){this.acceptRequired(d,"path"),this.acceptArray(d.params),this.acceptKey(d,"hash")}function h(d){c.call(this,d),this.acceptKey(d,"program"),this.acceptKey(d,"inverse")}function f(d){this.acceptRequired(d,"name"),this.acceptArray(d.params),this.acceptKey(d,"hash")}e.default=a,n.exports=e.default}(Qt,Qt.exports)),Qt.exports}var Vs;function wl(){return Vs||(Vs=1,function(n,e){e.__esModule=!0;function t(u){return u&&u.__esModule?u:{default:u}}var r=Vi(),s=t(r);function a(){var u=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=u}a.prototype=new s.default,a.prototype.Program=function(u){var m=!this.options.ignoreStandalone,l=!this.isRootSeen;this.isRootSeen=!0;for(var o=u.body,i=0,p=o.length;i<p;i++){var g=o[i],y=this.accept(g);if(y){var v=c(o,i,l),b=h(o,i,l),_=y.openStandalone&&v,w=y.closeStandalone&&b,S=y.inlineStandalone&&v&&b;y.close&&f(o,i,!0),y.open&&d(o,i,!0),m&&S&&(f(o,i),d(o,i)&&g.type==="PartialStatement"&&(g.indent=/([ \t]+$)/.exec(o[i-1].original)[1])),m&&_&&(f((g.program||g.inverse).body),d(o,i)),m&&w&&(f(o,i),d((g.inverse||g.program).body))}}return u},a.prototype.BlockStatement=a.prototype.DecoratorBlock=a.prototype.PartialBlockStatement=function(u){this.accept(u.program),this.accept(u.inverse);var m=u.program||u.inverse,l=u.program&&u.inverse,o=l,i=l;if(l&&l.chained)for(o=l.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var p={open:u.openStrip.open,close:u.closeStrip.close,openStandalone:h(m.body),closeStandalone:c((o||m).body)};if(u.openStrip.close&&f(m.body,null,!0),l){var g=u.inverseStrip;g.open&&d(m.body,null,!0),g.close&&f(o.body,null,!0),u.closeStrip.open&&d(i.body,null,!0),!this.options.ignoreStandalone&&c(m.body)&&h(o.body)&&(d(m.body),f(o.body))}else u.closeStrip.open&&d(m.body,null,!0);return p},a.prototype.Decorator=a.prototype.MustacheStatement=function(u){return u.strip},a.prototype.PartialStatement=a.prototype.CommentStatement=function(u){var m=u.strip||{};return{inlineStandalone:!0,open:m.open,close:m.close}};function c(u,m,l){m===void 0&&(m=u.length);var o=u[m-1],i=u[m-2];if(!o)return l;if(o.type==="ContentStatement")return(i||!l?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(o.original)}function h(u,m,l){m===void 0&&(m=-1);var o=u[m+1],i=u[m+2];if(!o)return l;if(o.type==="ContentStatement")return(i||!l?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(o.original)}function f(u,m,l){var o=u[m==null?0:m+1];if(!(!o||o.type!=="ContentStatement"||!l&&o.rightStripped)){var i=o.value;o.value=o.value.replace(l?/^\s+/:/^[ \t]*\r?\n?/,""),o.rightStripped=o.value!==i}}function d(u,m,l){var o=u[m==null?u.length-1:m-1];if(!(!o||o.type!=="ContentStatement"||!l&&o.leftStripped)){var i=o.value;return o.value=o.value.replace(l?/\s+$/:/[ \t]+$/,""),o.leftStripped=o.value!==i,o.leftStripped}}e.default=a,n.exports=e.default}(Xt,Xt.exports)),Xt.exports}var re={},Gs;function bl(){if(Gs)return re;Gs=1,re.__esModule=!0,re.SourceLocation=s,re.id=a,re.stripFlags=c,re.stripComment=h,re.preparePath=f,re.prepareMustache=d,re.prepareRawBlock=u,re.prepareBlock=m,re.prepareProgram=l,re.preparePartialBlock=o;function n(i){return i&&i.__esModule?i:{default:i}}var e=fe(),t=n(e);function r(i,p){if(p=p.path?p.path.original:p,i.path.original!==p){var g={loc:i.path.loc};throw new t.default(i.path.original+" doesn't match "+p,g)}}function s(i,p){this.source=i,this.start={line:p.first_line,column:p.first_column},this.end={line:p.last_line,column:p.last_column}}function a(i){return/^\[.*\]$/.test(i)?i.substring(1,i.length-1):i}function c(i,p){return{open:i.charAt(2)==="~",close:p.charAt(p.length-3)==="~"}}function h(i){return i.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function f(i,p,g){g=this.locInfo(g);for(var y=i?"@":"",v=[],b=0,_=0,w=p.length;_<w;_++){var S=p[_].part,C=p[_].original!==S;if(y+=(p[_].separator||"")+S,!C&&(S===".."||S==="."||S==="this")){if(v.length>0)throw new t.default("Invalid path: "+y,{loc:g});S===".."&&b++}else v.push(S)}return{type:"PathExpression",data:i,depth:b,parts:v,original:y,loc:g}}function d(i,p,g,y,v,b){var _=y.charAt(3)||y.charAt(2),w=_!=="{"&&_!=="&",S=/\*/.test(y);return{type:S?"Decorator":"MustacheStatement",path:i,params:p,hash:g,escaped:w,strip:v,loc:this.locInfo(b)}}function u(i,p,g,y){r(i,g),y=this.locInfo(y);var v={type:"Program",body:p,strip:{},loc:y};return{type:"BlockStatement",path:i.path,params:i.params,hash:i.hash,program:v,openStrip:{},inverseStrip:{},closeStrip:{},loc:y}}function m(i,p,g,y,v,b){y&&y.path&&r(i,y);var _=/\*/.test(i.open);p.blockParams=i.blockParams;var w=void 0,S=void 0;if(g){if(_)throw new t.default("Unexpected inverse block on decorator",g);g.chain&&(g.program.body[0].closeStrip=y.strip),S=g.strip,w=g.program}return v&&(v=w,w=p,p=v),{type:_?"DecoratorBlock":"BlockStatement",path:i.path,params:i.params,hash:i.hash,program:p,inverse:w,openStrip:i.strip,inverseStrip:S,closeStrip:y&&y.strip,loc:this.locInfo(b)}}function l(i,p){if(!p&&i.length){var g=i[0].loc,y=i[i.length-1].loc;g&&y&&(p={source:g.source,start:{line:g.start.line,column:g.start.column},end:{line:y.end.line,column:y.end.column}})}return{type:"Program",body:i,strip:{},loc:p}}function o(i,p,g,y){return r(i,g),{type:"PartialBlockStatement",name:i.path,params:i.params,hash:i.hash,program:p,openStrip:i.strip,closeStrip:g&&g.strip,loc:this.locInfo(y)}}return re}var Js;function Sl(){if(Js)return We;Js=1,We.__esModule=!0,We.parseWithoutProcessing=u,We.parse=m;function n(l){if(l&&l.__esModule)return l;var o={};if(l!=null)for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o[i]=l[i]);return o.default=l,o}function e(l){return l&&l.__esModule?l:{default:l}}var t=yl(),r=e(t),s=wl(),a=e(s),c=bl(),h=n(c),f=Z();We.parser=r.default;var d={};f.extend(d,h);function u(l,o){if(l.type==="Program")return l;r.default.yy=d,d.locInfo=function(p){return new d.SourceLocation(o&&o.srcName,p)};var i=r.default.parse(l);return i}function m(l,o){var i=u(l,o),p=new a.default(o);return p.accept(i)}return We}var Ve={},$s;function Cl(){if($s)return Ve;$s=1,Ve.__esModule=!0,Ve.Compiler=h,Ve.precompile=f,Ve.compile=d;function n(l){return l&&l.__esModule?l:{default:l}}var e=fe(),t=n(e),r=Z(),s=Wi(),a=n(s),c=[].slice;function h(){}h.prototype={compiler:h,equals:function(o){var i=this.opcodes.length;if(o.opcodes.length!==i)return!1;for(var p=0;p<i;p++){var g=this.opcodes[p],y=o.opcodes[p];if(g.opcode!==y.opcode||!u(g.args,y.args))return!1}i=this.children.length;for(var p=0;p<i;p++)if(!this.children[p].equals(o.children[p]))return!1;return!0},guid:0,compile:function(o,i){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=i,this.stringParams=i.stringParams,this.trackIds=i.trackIds,i.blockParams=i.blockParams||[],i.knownHelpers=r.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},i.knownHelpers),this.accept(o)},compileProgram:function(o){var i=new this.compiler,p=i.compile(o,this.options),g=this.guid++;return this.usePartial=this.usePartial||p.usePartial,this.children[g]=p,this.useDepths=this.useDepths||p.useDepths,g},accept:function(o){if(!this[o.type])throw new t.default("Unknown type: "+o.type,o);this.sourceNode.unshift(o);var i=this[o.type](o);return this.sourceNode.shift(),i},Program:function(o){this.options.blockParams.unshift(o.blockParams);for(var i=o.body,p=i.length,g=0;g<p;g++)this.accept(i[g]);return this.options.blockParams.shift(),this.isSimple=p===1,this.blockParams=o.blockParams?o.blockParams.length:0,this},BlockStatement:function(o){m(o);var i=o.program,p=o.inverse;i=i&&this.compileProgram(i),p=p&&this.compileProgram(p);var g=this.classifySexpr(o);g==="helper"?this.helperSexpr(o,i,p):g==="simple"?(this.simpleSexpr(o),this.opcode("pushProgram",i),this.opcode("pushProgram",p),this.opcode("emptyHash"),this.opcode("blockValue",o.path.original)):(this.ambiguousSexpr(o,i,p),this.opcode("pushProgram",i),this.opcode("pushProgram",p),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(o){var i=o.program&&this.compileProgram(o.program),p=this.setupFullMustacheParams(o,i,void 0),g=o.path;this.useDecorators=!0,this.opcode("registerDecorator",p.length,g.original)},PartialStatement:function(o){this.usePartial=!0;var i=o.program;i&&(i=this.compileProgram(o.program));var p=o.params;if(p.length>1)throw new t.default("Unsupported number of partial arguments: "+p.length,o);p.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):p.push({type:"PathExpression",parts:[],depth:0}));var g=o.name.original,y=o.name.type==="SubExpression";y&&this.accept(o.name),this.setupFullMustacheParams(o,i,void 0,!0);var v=o.indent||"";this.options.preventIndent&&v&&(this.opcode("appendContent",v),v=""),this.opcode("invokePartial",y,g,v),this.opcode("append")},PartialBlockStatement:function(o){this.PartialStatement(o)},MustacheStatement:function(o){this.SubExpression(o),o.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(o){this.DecoratorBlock(o)},ContentStatement:function(o){o.value&&this.opcode("appendContent",o.value)},CommentStatement:function(){},SubExpression:function(o){m(o);var i=this.classifySexpr(o);i==="simple"?this.simpleSexpr(o):i==="helper"?this.helperSexpr(o):this.ambiguousSexpr(o)},ambiguousSexpr:function(o,i,p){var g=o.path,y=g.parts[0],v=i!=null||p!=null;this.opcode("getContext",g.depth),this.opcode("pushProgram",i),this.opcode("pushProgram",p),g.strict=!0,this.accept(g),this.opcode("invokeAmbiguous",y,v)},simpleSexpr:function(o){var i=o.path;i.strict=!0,this.accept(i),this.opcode("resolvePossibleLambda")},helperSexpr:function(o,i,p){var g=this.setupFullMustacheParams(o,i,p),y=o.path,v=y.parts[0];if(this.options.knownHelpers[v])this.opcode("invokeKnownHelper",g.length,v);else{if(this.options.knownHelpersOnly)throw new t.default("You specified knownHelpersOnly, but used the unknown helper "+v,o);y.strict=!0,y.falsy=!0,this.accept(y),this.opcode("invokeHelper",g.length,y.original,a.default.helpers.simpleId(y))}},PathExpression:function(o){this.addDepth(o.depth),this.opcode("getContext",o.depth);var i=o.parts[0],p=a.default.helpers.scopedId(o),g=!o.depth&&!p&&this.blockParamIndex(i);g?this.opcode("lookupBlockParam",g,o.parts):i?o.data?(this.options.data=!0,this.opcode("lookupData",o.depth,o.parts,o.strict)):this.opcode("lookupOnContext",o.parts,o.falsy,o.strict,p):this.opcode("pushContext")},StringLiteral:function(o){this.opcode("pushString",o.value)},NumberLiteral:function(o){this.opcode("pushLiteral",o.value)},BooleanLiteral:function(o){this.opcode("pushLiteral",o.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(o){var i=o.pairs,p=0,g=i.length;for(this.opcode("pushHash");p<g;p++)this.pushParam(i[p].value);for(;p--;)this.opcode("assignToHash",i[p].key);this.opcode("popHash")},opcode:function(o){this.opcodes.push({opcode:o,args:c.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(o){o&&(this.useDepths=!0)},classifySexpr:function(o){var i=a.default.helpers.simpleId(o.path),p=i&&!!this.blockParamIndex(o.path.parts[0]),g=!p&&a.default.helpers.helperExpression(o),y=!p&&(g||i);if(y&&!g){var v=o.path.parts[0],b=this.options;b.knownHelpers[v]?g=!0:b.knownHelpersOnly&&(y=!1)}return g?"helper":y?"ambiguous":"simple"},pushParams:function(o){for(var i=0,p=o.length;i<p;i++)this.pushParam(o[i])},pushParam:function(o){var i=o.value!=null?o.value:o.original||"";if(this.stringParams)i.replace&&(i=i.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),o.depth&&this.addDepth(o.depth),this.opcode("getContext",o.depth||0),this.opcode("pushStringParam",i,o.type),o.type==="SubExpression"&&this.accept(o);else{if(this.trackIds){var p=void 0;if(o.parts&&!a.default.helpers.scopedId(o)&&!o.depth&&(p=this.blockParamIndex(o.parts[0])),p){var g=o.parts.slice(1).join(".");this.opcode("pushId","BlockParam",p,g)}else i=o.original||i,i.replace&&(i=i.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",o.type,i)}this.accept(o)}},setupFullMustacheParams:function(o,i,p,g){var y=o.params;return this.pushParams(y),this.opcode("pushProgram",i),this.opcode("pushProgram",p),o.hash?this.accept(o.hash):this.opcode("emptyHash",g),y},blockParamIndex:function(o){for(var i=0,p=this.options.blockParams.length;i<p;i++){var g=this.options.blockParams[i],y=g&&r.indexOf(g,o);if(g&&y>=0)return[i,y]}}};function f(l,o,i){if(l==null||typeof l!="string"&&l.type!=="Program")throw new t.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+l);o=o||{},"data"in o||(o.data=!0),o.compat&&(o.useDepths=!0);var p=i.parse(l,o),g=new i.Compiler().compile(p,o);return new i.JavaScriptCompiler().compile(g,o)}function d(l,o,i){if(o===void 0&&(o={}),l==null||typeof l!="string"&&l.type!=="Program")throw new t.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+l);o=r.extend({},o),"data"in o||(o.data=!0),o.compat&&(o.useDepths=!0);var p=void 0;function g(){var v=i.parse(l,o),b=new i.Compiler().compile(v,o),_=new i.JavaScriptCompiler().compile(b,o,void 0,!0);return i.template(_)}function y(v,b){return p||(p=g()),p.call(this,v,b)}return y._setup=function(v){return p||(p=g()),p._setup(v)},y._child=function(v,b,_,w){return p||(p=g()),p._child(v,b,_,w)},y}function u(l,o){if(l===o)return!0;if(r.isArray(l)&&r.isArray(o)&&l.length===o.length){for(var i=0;i<l.length;i++)if(!u(l[i],o[i]))return!1;return!0}}function m(l){if(!l.path.parts){var o=l.path;l.path={type:"PathExpression",data:!1,depth:0,parts:[o.original+""],original:o.original+"",loc:o.loc}}}return Ve}var zt={exports:{}},Yt={exports:{}},lt={},$r={},Zt={},er={},js;function xl(){if(js)return er;js=1;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return er.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},er.decode=function(e){var t=65,r=90,s=97,a=122,c=48,h=57,f=43,d=47,u=26,m=52;return t<=e&&e<=r?e-t:s<=e&&e<=a?e-s+u:c<=e&&e<=h?e-c+m:e==f?62:e==d?63:-1},er}var Ks;function Gi(){if(Ks)return Zt;Ks=1;var n=xl(),e=5,t=1<<e,r=t-1,s=t;function a(h){return h<0?(-h<<1)+1:(h<<1)+0}function c(h){var f=(h&1)===1,d=h>>1;return f?-d:d}return Zt.encode=function(f){var d="",u,m=a(f);do u=m&r,m>>>=e,m>0&&(u|=s),d+=n.encode(u);while(m>0);return d},Zt.decode=function(f,d,u){var m=f.length,l=0,o=0,i,p;do{if(d>=m)throw new Error("Expected more digits in base 64 VLQ value.");if(p=n.decode(f.charCodeAt(d++)),p===-1)throw new Error("Invalid base64 digit: "+f.charAt(d-1));i=!!(p&s),p&=r,l=l+(p<<o),o+=e}while(i);u.value=c(l),u.rest=d},Zt}var jr={},Xs;function St(){return Xs||(Xs=1,function(n){function e(_,w,S){if(w in _)return _[w];if(arguments.length===3)return S;throw new Error('"'+w+'" is a required argument.')}n.getArg=e;var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function s(_){var w=_.match(t);return w?{scheme:w[1],auth:w[2],host:w[3],port:w[4],path:w[5]}:null}n.urlParse=s;function a(_){var w="";return _.scheme&&(w+=_.scheme+":"),w+="//",_.auth&&(w+=_.auth+"@"),_.host&&(w+=_.host),_.port&&(w+=":"+_.port),_.path&&(w+=_.path),w}n.urlGenerate=a;function c(_){var w=_,S=s(_);if(S){if(!S.path)return _;w=S.path}for(var C=n.isAbsolute(w),k=w.split(/\/+/),A,P=0,x=k.length-1;x>=0;x--)A=k[x],A==="."?k.splice(x,1):A===".."?P++:P>0&&(A===""?(k.splice(x+1,P),P=0):(k.splice(x,2),P--));return w=k.join("/"),w===""&&(w=C?"/":"."),S?(S.path=w,a(S)):w}n.normalize=c;function h(_,w){_===""&&(_="."),w===""&&(w=".");var S=s(w),C=s(_);if(C&&(_=C.path||"/"),S&&!S.scheme)return C&&(S.scheme=C.scheme),a(S);if(S||w.match(r))return w;if(C&&!C.host&&!C.path)return C.host=w,a(C);var k=w.charAt(0)==="/"?w:c(_.replace(/\/+$/,"")+"/"+w);return C?(C.path=k,a(C)):k}n.join=h,n.isAbsolute=function(_){return _.charAt(0)==="/"||t.test(_)};function f(_,w){_===""&&(_="."),_=_.replace(/\/$/,"");for(var S=0;w.indexOf(_+"/")!==0;){var C=_.lastIndexOf("/");if(C<0||(_=_.slice(0,C),_.match(/^([^\/]+:\/)?\/*$/)))return w;++S}return Array(S+1).join("../")+w.substr(_.length+1)}n.relative=f;var d=function(){var _=Object.create(null);return!("__proto__"in _)}();function u(_){return _}function m(_){return o(_)?"$"+_:_}n.toSetString=d?u:m;function l(_){return o(_)?_.slice(1):_}n.fromSetString=d?u:l;function o(_){if(!_)return!1;var w=_.length;if(w<9||_.charCodeAt(w-1)!==95||_.charCodeAt(w-2)!==95||_.charCodeAt(w-3)!==111||_.charCodeAt(w-4)!==116||_.charCodeAt(w-5)!==111||_.charCodeAt(w-6)!==114||_.charCodeAt(w-7)!==112||_.charCodeAt(w-8)!==95||_.charCodeAt(w-9)!==95)return!1;for(var S=w-10;S>=0;S--)if(_.charCodeAt(S)!==36)return!1;return!0}function i(_,w,S){var C=g(_.source,w.source);return C!==0||(C=_.originalLine-w.originalLine,C!==0)||(C=_.originalColumn-w.originalColumn,C!==0||S)||(C=_.generatedColumn-w.generatedColumn,C!==0)||(C=_.generatedLine-w.generatedLine,C!==0)?C:g(_.name,w.name)}n.compareByOriginalPositions=i;function p(_,w,S){var C=_.generatedLine-w.generatedLine;return C!==0||(C=_.generatedColumn-w.generatedColumn,C!==0||S)||(C=g(_.source,w.source),C!==0)||(C=_.originalLine-w.originalLine,C!==0)||(C=_.originalColumn-w.originalColumn,C!==0)?C:g(_.name,w.name)}n.compareByGeneratedPositionsDeflated=p;function g(_,w){return _===w?0:_===null?1:w===null?-1:_>w?1:-1}function y(_,w){var S=_.generatedLine-w.generatedLine;return S!==0||(S=_.generatedColumn-w.generatedColumn,S!==0)||(S=g(_.source,w.source),S!==0)||(S=_.originalLine-w.originalLine,S!==0)||(S=_.originalColumn-w.originalColumn,S!==0)?S:g(_.name,w.name)}n.compareByGeneratedPositionsInflated=y;function v(_){return JSON.parse(_.replace(/^\)]}'[^\n]*\n/,""))}n.parseSourceMapInput=v;function b(_,w,S){if(w=w||"",_&&(_[_.length-1]!=="/"&&w[0]!=="/"&&(_+="/"),w=_+w),S){var C=s(S);if(!C)throw new Error("sourceMapURL could not be parsed");if(C.path){var k=C.path.lastIndexOf("/");k>=0&&(C.path=C.path.substring(0,k+1))}w=h(a(C),w)}return c(w)}n.computeSourceURL=b}(jr)),jr}var Kr={},Qs;function Ji(){if(Qs)return Kr;Qs=1;var n=St(),e=Object.prototype.hasOwnProperty,t=typeof Map<"u";function r(){this._array=[],this._set=t?new Map:Object.create(null)}return r.fromArray=function(a,c){for(var h=new r,f=0,d=a.length;f<d;f++)h.add(a[f],c);return h},r.prototype.size=function(){return t?this._set.size:Object.getOwnPropertyNames(this._set).length},r.prototype.add=function(a,c){var h=t?a:n.toSetString(a),f=t?this.has(a):e.call(this._set,h),d=this._array.length;(!f||c)&&this._array.push(a),f||(t?this._set.set(a,d):this._set[h]=d)},r.prototype.has=function(a){if(t)return this._set.has(a);var c=n.toSetString(a);return e.call(this._set,c)},r.prototype.indexOf=function(a){if(t){var c=this._set.get(a);if(c>=0)return c}else{var h=n.toSetString(a);if(e.call(this._set,h))return this._set[h]}throw new Error('"'+a+'" is not in the set.')},r.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},r.prototype.toArray=function(){return this._array.slice()},Kr.ArraySet=r,Kr}var Xr={},zs;function Pl(){if(zs)return Xr;zs=1;var n=St();function e(r,s){var a=r.generatedLine,c=s.generatedLine,h=r.generatedColumn,f=s.generatedColumn;return c>a||c==a&&f>=h||n.compareByGeneratedPositionsInflated(r,s)<=0}function t(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return t.prototype.unsortedForEach=function(s,a){this._array.forEach(s,a)},t.prototype.add=function(s){e(this._last,s)?(this._last=s,this._array.push(s)):(this._sorted=!1,this._array.push(s))},t.prototype.toArray=function(){return this._sorted||(this._array.sort(n.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},Xr.MappingList=t,Xr}var Ys;function $i(){if(Ys)return $r;Ys=1;var n=Gi(),e=St(),t=Ji().ArraySet,r=Pl().MappingList;function s(a){a||(a={}),this._file=e.getArg(a,"file",null),this._sourceRoot=e.getArg(a,"sourceRoot",null),this._skipValidation=e.getArg(a,"skipValidation",!1),this._sources=new t,this._names=new t,this._mappings=new r,this._sourcesContents=null}return s.prototype._version=3,s.fromSourceMap=function(c){var h=c.sourceRoot,f=new s({file:c.file,sourceRoot:h});return c.eachMapping(function(d){var u={generated:{line:d.generatedLine,column:d.generatedColumn}};d.source!=null&&(u.source=d.source,h!=null&&(u.source=e.relative(h,u.source)),u.original={line:d.originalLine,column:d.originalColumn},d.name!=null&&(u.name=d.name)),f.addMapping(u)}),c.sources.forEach(function(d){var u=d;h!==null&&(u=e.relative(h,d)),f._sources.has(u)||f._sources.add(u);var m=c.sourceContentFor(d);m!=null&&f.setSourceContent(d,m)}),f},s.prototype.addMapping=function(c){var h=e.getArg(c,"generated"),f=e.getArg(c,"original",null),d=e.getArg(c,"source",null),u=e.getArg(c,"name",null);this._skipValidation||this._validateMapping(h,f,d,u),d!=null&&(d=String(d),this._sources.has(d)||this._sources.add(d)),u!=null&&(u=String(u),this._names.has(u)||this._names.add(u)),this._mappings.add({generatedLine:h.line,generatedColumn:h.column,originalLine:f!=null&&f.line,originalColumn:f!=null&&f.column,source:d,name:u})},s.prototype.setSourceContent=function(c,h){var f=c;this._sourceRoot!=null&&(f=e.relative(this._sourceRoot,f)),h!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(f)]=h):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(f)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(c,h,f){var d=h;if(h==null){if(c.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);d=c.file}var u=this._sourceRoot;u!=null&&(d=e.relative(u,d));var m=new t,l=new t;this._mappings.unsortedForEach(function(o){if(o.source===d&&o.originalLine!=null){var i=c.originalPositionFor({line:o.originalLine,column:o.originalColumn});i.source!=null&&(o.source=i.source,f!=null&&(o.source=e.join(f,o.source)),u!=null&&(o.source=e.relative(u,o.source)),o.originalLine=i.line,o.originalColumn=i.column,i.name!=null&&(o.name=i.name))}var p=o.source;p!=null&&!m.has(p)&&m.add(p);var g=o.name;g!=null&&!l.has(g)&&l.add(g)},this),this._sources=m,this._names=l,c.sources.forEach(function(o){var i=c.sourceContentFor(o);i!=null&&(f!=null&&(o=e.join(f,o)),u!=null&&(o=e.relative(u,o)),this.setSourceContent(o,i))},this)},s.prototype._validateMapping=function(c,h,f,d){if(h&&typeof h.line!="number"&&typeof h.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&c.line>0&&c.column>=0&&!h&&!f&&!d)){if(c&&"line"in c&&"column"in c&&h&&"line"in h&&"column"in h&&c.line>0&&c.column>=0&&h.line>0&&h.column>=0&&f)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:c,source:f,original:h,name:d}))}},s.prototype._serializeMappings=function(){for(var c=0,h=1,f=0,d=0,u=0,m=0,l="",o,i,p,g,y=this._mappings.toArray(),v=0,b=y.length;v<b;v++){if(i=y[v],o="",i.generatedLine!==h)for(c=0;i.generatedLine!==h;)o+=";",h++;else if(v>0){if(!e.compareByGeneratedPositionsInflated(i,y[v-1]))continue;o+=","}o+=n.encode(i.generatedColumn-c),c=i.generatedColumn,i.source!=null&&(g=this._sources.indexOf(i.source),o+=n.encode(g-m),m=g,o+=n.encode(i.originalLine-1-d),d=i.originalLine-1,o+=n.encode(i.originalColumn-f),f=i.originalColumn,i.name!=null&&(p=this._names.indexOf(i.name),o+=n.encode(p-u),u=p)),l+=o}return l},s.prototype._generateSourcesContent=function(c,h){return c.map(function(f){if(!this._sourcesContents)return null;h!=null&&(f=e.relative(h,f));var d=e.toSetString(f);return Object.prototype.hasOwnProperty.call(this._sourcesContents,d)?this._sourcesContents[d]:null},this)},s.prototype.toJSON=function(){var c={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(c.file=this._file),this._sourceRoot!=null&&(c.sourceRoot=this._sourceRoot),this._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot)),c},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},$r.SourceMapGenerator=s,$r}var ut={},Qr={},Zs;function kl(){return Zs||(Zs=1,function(n){n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2;function e(t,r,s,a,c,h){var f=Math.floor((r-t)/2)+t,d=c(s,a[f],!0);return d===0?f:d>0?r-f>1?e(f,r,s,a,c,h):h==n.LEAST_UPPER_BOUND?r<a.length?r:-1:f:f-t>1?e(t,f,s,a,c,h):h==n.LEAST_UPPER_BOUND?f:t<0?-1:t}n.search=function(r,s,a,c){if(s.length===0)return-1;var h=e(-1,s.length,r,s,a,c||n.GREATEST_LOWER_BOUND);if(h<0)return-1;for(;h-1>=0&&a(s[h],s[h-1],!0)===0;)--h;return h}}(Qr)),Qr}var zr={},ei;function El(){if(ei)return zr;ei=1;function n(r,s,a){var c=r[s];r[s]=r[a],r[a]=c}function e(r,s){return Math.round(r+Math.random()*(s-r))}function t(r,s,a,c){if(a<c){var h=e(a,c),f=a-1;n(r,h,c);for(var d=r[c],u=a;u<c;u++)s(r[u],d)<=0&&(f+=1,n(r,f,u));n(r,f+1,u);var m=f+1;t(r,s,a,m-1),t(r,s,m+1,c)}}return zr.quickSort=function(r,s){t(r,s,0,r.length-1)},zr}var ti;function Al(){if(ti)return ut;ti=1;var n=St(),e=kl(),t=Ji().ArraySet,r=Gi(),s=El().quickSort;function a(d,u){var m=d;return typeof d=="string"&&(m=n.parseSourceMapInput(d)),m.sections!=null?new f(m,u):new c(m,u)}a.fromSourceMap=function(d,u){return c.fromSourceMap(d,u)},a.prototype._version=3,a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),a.prototype._charIsMappingSeparator=function(u,m){var l=u.charAt(m);return l===";"||l===","},a.prototype._parseMappings=function(u,m){throw new Error("Subclasses must implement _parseMappings")},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.GREATEST_LOWER_BOUND=1,a.LEAST_UPPER_BOUND=2,a.prototype.eachMapping=function(u,m,l){var o=m||null,i=l||a.GENERATED_ORDER,p;switch(i){case a.GENERATED_ORDER:p=this._generatedMappings;break;case a.ORIGINAL_ORDER:p=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var g=this.sourceRoot;p.map(function(y){var v=y.source===null?null:this._sources.at(y.source);return v=n.computeSourceURL(g,v,this._sourceMapURL),{source:v,generatedLine:y.generatedLine,generatedColumn:y.generatedColumn,originalLine:y.originalLine,originalColumn:y.originalColumn,name:y.name===null?null:this._names.at(y.name)}},this).forEach(u,o)},a.prototype.allGeneratedPositionsFor=function(u){var m=n.getArg(u,"line"),l={source:n.getArg(u,"source"),originalLine:m,originalColumn:n.getArg(u,"column",0)};if(l.source=this._findSourceIndex(l.source),l.source<0)return[];var o=[],i=this._findMapping(l,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,e.LEAST_UPPER_BOUND);if(i>=0){var p=this._originalMappings[i];if(u.column===void 0)for(var g=p.originalLine;p&&p.originalLine===g;)o.push({line:n.getArg(p,"generatedLine",null),column:n.getArg(p,"generatedColumn",null),lastColumn:n.getArg(p,"lastGeneratedColumn",null)}),p=this._originalMappings[++i];else for(var y=p.originalColumn;p&&p.originalLine===m&&p.originalColumn==y;)o.push({line:n.getArg(p,"generatedLine",null),column:n.getArg(p,"generatedColumn",null),lastColumn:n.getArg(p,"lastGeneratedColumn",null)}),p=this._originalMappings[++i]}return o},ut.SourceMapConsumer=a;function c(d,u){var m=d;typeof d=="string"&&(m=n.parseSourceMapInput(d));var l=n.getArg(m,"version"),o=n.getArg(m,"sources"),i=n.getArg(m,"names",[]),p=n.getArg(m,"sourceRoot",null),g=n.getArg(m,"sourcesContent",null),y=n.getArg(m,"mappings"),v=n.getArg(m,"file",null);if(l!=this._version)throw new Error("Unsupported version: "+l);p&&(p=n.normalize(p)),o=o.map(String).map(n.normalize).map(function(b){return p&&n.isAbsolute(p)&&n.isAbsolute(b)?n.relative(p,b):b}),this._names=t.fromArray(i.map(String),!0),this._sources=t.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(b){return n.computeSourceURL(p,b,u)}),this.sourceRoot=p,this.sourcesContent=g,this._mappings=y,this._sourceMapURL=u,this.file=v}c.prototype=Object.create(a.prototype),c.prototype.consumer=a,c.prototype._findSourceIndex=function(d){var u=d;if(this.sourceRoot!=null&&(u=n.relative(this.sourceRoot,u)),this._sources.has(u))return this._sources.indexOf(u);var m;for(m=0;m<this._absoluteSources.length;++m)if(this._absoluteSources[m]==d)return m;return-1},c.fromSourceMap=function(u,m){var l=Object.create(c.prototype),o=l._names=t.fromArray(u._names.toArray(),!0),i=l._sources=t.fromArray(u._sources.toArray(),!0);l.sourceRoot=u._sourceRoot,l.sourcesContent=u._generateSourcesContent(l._sources.toArray(),l.sourceRoot),l.file=u._file,l._sourceMapURL=m,l._absoluteSources=l._sources.toArray().map(function(S){return n.computeSourceURL(l.sourceRoot,S,m)});for(var p=u._mappings.toArray().slice(),g=l.__generatedMappings=[],y=l.__originalMappings=[],v=0,b=p.length;v<b;v++){var _=p[v],w=new h;w.generatedLine=_.generatedLine,w.generatedColumn=_.generatedColumn,_.source&&(w.source=i.indexOf(_.source),w.originalLine=_.originalLine,w.originalColumn=_.originalColumn,_.name&&(w.name=o.indexOf(_.name)),y.push(w)),g.push(w)}return s(l.__originalMappings,n.compareByOriginalPositions),l},c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function h(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}c.prototype._parseMappings=function(u,m){for(var l=1,o=0,i=0,p=0,g=0,y=0,v=u.length,b=0,_={},w={},S=[],C=[],k,A,P,x,E;b<v;)if(u.charAt(b)===";")l++,b++,o=0;else if(u.charAt(b)===",")b++;else{for(k=new h,k.generatedLine=l,x=b;x<v&&!this._charIsMappingSeparator(u,x);x++);if(A=u.slice(b,x),P=_[A],P)b+=A.length;else{for(P=[];b<x;)r.decode(u,b,w),E=w.value,b=w.rest,P.push(E);if(P.length===2)throw new Error("Found a source, but no line and column");if(P.length===3)throw new Error("Found a source and line, but no column");_[A]=P}k.generatedColumn=o+P[0],o=k.generatedColumn,P.length>1&&(k.source=g+P[1],g+=P[1],k.originalLine=i+P[2],i=k.originalLine,k.originalLine+=1,k.originalColumn=p+P[3],p=k.originalColumn,P.length>4&&(k.name=y+P[4],y+=P[4])),C.push(k),typeof k.originalLine=="number"&&S.push(k)}s(C,n.compareByGeneratedPositionsDeflated),this.__generatedMappings=C,s(S,n.compareByOriginalPositions),this.__originalMappings=S},c.prototype._findMapping=function(u,m,l,o,i,p){if(u[l]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+u[l]);if(u[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+u[o]);return e.search(u,m,i,p)},c.prototype.computeColumnSpans=function(){for(var u=0;u<this._generatedMappings.length;++u){var m=this._generatedMappings[u];if(u+1<this._generatedMappings.length){var l=this._generatedMappings[u+1];if(m.generatedLine===l.generatedLine){m.lastGeneratedColumn=l.generatedColumn-1;continue}}m.lastGeneratedColumn=1/0}},c.prototype.originalPositionFor=function(u){var m={generatedLine:n.getArg(u,"line"),generatedColumn:n.getArg(u,"column")},l=this._findMapping(m,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositionsDeflated,n.getArg(u,"bias",a.GREATEST_LOWER_BOUND));if(l>=0){var o=this._generatedMappings[l];if(o.generatedLine===m.generatedLine){var i=n.getArg(o,"source",null);i!==null&&(i=this._sources.at(i),i=n.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var p=n.getArg(o,"name",null);return p!==null&&(p=this._names.at(p)),{source:i,line:n.getArg(o,"originalLine",null),column:n.getArg(o,"originalColumn",null),name:p}}}return{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(u){return u==null}):!1},c.prototype.sourceContentFor=function(u,m){if(!this.sourcesContent)return null;var l=this._findSourceIndex(u);if(l>=0)return this.sourcesContent[l];var o=u;this.sourceRoot!=null&&(o=n.relative(this.sourceRoot,o));var i;if(this.sourceRoot!=null&&(i=n.urlParse(this.sourceRoot))){var p=o.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(p))return this.sourcesContent[this._sources.indexOf(p)];if((!i.path||i.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(m)return null;throw new Error('"'+o+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(u){var m=n.getArg(u,"source");if(m=this._findSourceIndex(m),m<0)return{line:null,column:null,lastColumn:null};var l={source:m,originalLine:n.getArg(u,"line"),originalColumn:n.getArg(u,"column")},o=this._findMapping(l,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,n.getArg(u,"bias",a.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===l.source)return{line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},ut.BasicSourceMapConsumer=c;function f(d,u){var m=d;typeof d=="string"&&(m=n.parseSourceMapInput(d));var l=n.getArg(m,"version"),o=n.getArg(m,"sections");if(l!=this._version)throw new Error("Unsupported version: "+l);this._sources=new t,this._names=new t;var i={line:-1,column:0};this._sections=o.map(function(p){if(p.url)throw new Error("Support for url field in sections not implemented.");var g=n.getArg(p,"offset"),y=n.getArg(g,"line"),v=n.getArg(g,"column");if(y<i.line||y===i.line&&v<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=g,{generatedOffset:{generatedLine:y+1,generatedColumn:v+1},consumer:new a(n.getArg(p,"map"),u)}})}return f.prototype=Object.create(a.prototype),f.prototype.constructor=a,f.prototype._version=3,Object.defineProperty(f.prototype,"sources",{get:function(){for(var d=[],u=0;u<this._sections.length;u++)for(var m=0;m<this._sections[u].consumer.sources.length;m++)d.push(this._sections[u].consumer.sources[m]);return d}}),f.prototype.originalPositionFor=function(u){var m={generatedLine:n.getArg(u,"line"),generatedColumn:n.getArg(u,"column")},l=e.search(m,this._sections,function(i,p){var g=i.generatedLine-p.generatedOffset.generatedLine;return g||i.generatedColumn-p.generatedOffset.generatedColumn}),o=this._sections[l];return o?o.consumer.originalPositionFor({line:m.generatedLine-(o.generatedOffset.generatedLine-1),column:m.generatedColumn-(o.generatedOffset.generatedLine===m.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:u.bias}):{source:null,line:null,column:null,name:null}},f.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(u){return u.consumer.hasContentsOfAllSources()})},f.prototype.sourceContentFor=function(u,m){for(var l=0;l<this._sections.length;l++){var o=this._sections[l],i=o.consumer.sourceContentFor(u,!0);if(i)return i}if(m)return null;throw new Error('"'+u+'" is not in the SourceMap.')},f.prototype.generatedPositionFor=function(u){for(var m=0;m<this._sections.length;m++){var l=this._sections[m];if(l.consumer._findSourceIndex(n.getArg(u,"source"))!==-1){var o=l.consumer.generatedPositionFor(u);if(o){var i={line:o.line+(l.generatedOffset.generatedLine-1),column:o.column+(l.generatedOffset.generatedLine===o.line?l.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}},f.prototype._parseMappings=function(u,m){this.__generatedMappings=[],this.__originalMappings=[];for(var l=0;l<this._sections.length;l++)for(var o=this._sections[l],i=o.consumer._generatedMappings,p=0;p<i.length;p++){var g=i[p],y=o.consumer._sources.at(g.source);y=n.computeSourceURL(o.consumer.sourceRoot,y,this._sourceMapURL),this._sources.add(y),y=this._sources.indexOf(y);var v=null;g.name&&(v=o.consumer._names.at(g.name),this._names.add(v),v=this._names.indexOf(v));var b={source:y,generatedLine:g.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:g.generatedColumn+(o.generatedOffset.generatedLine===g.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:g.originalLine,originalColumn:g.originalColumn,name:v};this.__generatedMappings.push(b),typeof b.originalLine=="number"&&this.__originalMappings.push(b)}s(this.__generatedMappings,n.compareByGeneratedPositionsDeflated),s(this.__originalMappings,n.compareByOriginalPositions)},ut.IndexedSourceMapConsumer=f,ut}var Yr={},ri;function Rl(){if(ri)return Yr;ri=1;var n=$i().SourceMapGenerator,e=St(),t=/(\r?\n)/,r=10,s="$$$isSourceNode$$$";function a(c,h,f,d,u){this.children=[],this.sourceContents={},this.line=c??null,this.column=h??null,this.source=f??null,this.name=u??null,this[s]=!0,d!=null&&this.add(d)}return a.fromStringWithSourceMap=function(h,f,d){var u=new a,m=h.split(t),l=0,o=function(){var v=_(),b=_()||"";return v+b;function _(){return l<m.length?m[l++]:void 0}},i=1,p=0,g=null;return f.eachMapping(function(v){if(g!==null)if(i<v.generatedLine)y(g,o()),i++,p=0;else{var b=m[l]||"",_=b.substr(0,v.generatedColumn-p);m[l]=b.substr(v.generatedColumn-p),p=v.generatedColumn,y(g,_),g=v;return}for(;i<v.generatedLine;)u.add(o()),i++;if(p<v.generatedColumn){var b=m[l]||"";u.add(b.substr(0,v.generatedColumn)),m[l]=b.substr(v.generatedColumn),p=v.generatedColumn}g=v},this),l<m.length&&(g&&y(g,o()),u.add(m.splice(l).join(""))),f.sources.forEach(function(v){var b=f.sourceContentFor(v);b!=null&&(d!=null&&(v=e.join(d,v)),u.setSourceContent(v,b))}),u;function y(v,b){if(v===null||v.source===void 0)u.add(b);else{var _=d?e.join(d,v.source):v.source;u.add(new a(v.originalLine,v.originalColumn,_,b,v.name))}}},a.prototype.add=function(h){if(Array.isArray(h))h.forEach(function(f){this.add(f)},this);else if(h[s]||typeof h=="string")h&&this.children.push(h);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+h);return this},a.prototype.prepend=function(h){if(Array.isArray(h))for(var f=h.length-1;f>=0;f--)this.prepend(h[f]);else if(h[s]||typeof h=="string")this.children.unshift(h);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+h);return this},a.prototype.walk=function(h){for(var f,d=0,u=this.children.length;d<u;d++)f=this.children[d],f[s]?f.walk(h):f!==""&&h(f,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(h){var f,d,u=this.children.length;if(u>0){for(f=[],d=0;d<u-1;d++)f.push(this.children[d]),f.push(h);f.push(this.children[d]),this.children=f}return this},a.prototype.replaceRight=function(h,f){var d=this.children[this.children.length-1];return d[s]?d.replaceRight(h,f):typeof d=="string"?this.children[this.children.length-1]=d.replace(h,f):this.children.push("".replace(h,f)),this},a.prototype.setSourceContent=function(h,f){this.sourceContents[e.toSetString(h)]=f},a.prototype.walkSourceContents=function(h){for(var f=0,d=this.children.length;f<d;f++)this.children[f][s]&&this.children[f].walkSourceContents(h);for(var u=Object.keys(this.sourceContents),f=0,d=u.length;f<d;f++)h(e.fromSetString(u[f]),this.sourceContents[u[f]])},a.prototype.toString=function(){var h="";return this.walk(function(f){h+=f}),h},a.prototype.toStringWithSourceMap=function(h){var f={code:"",line:1,column:0},d=new n(h),u=!1,m=null,l=null,o=null,i=null;return this.walk(function(p,g){f.code+=p,g.source!==null&&g.line!==null&&g.column!==null?((m!==g.source||l!==g.line||o!==g.column||i!==g.name)&&d.addMapping({source:g.source,original:{line:g.line,column:g.column},generated:{line:f.line,column:f.column},name:g.name}),m=g.source,l=g.line,o=g.column,i=g.name,u=!0):u&&(d.addMapping({generated:{line:f.line,column:f.column}}),m=null,u=!1);for(var y=0,v=p.length;y<v;y++)p.charCodeAt(y)===r?(f.line++,f.column=0,y+1===v?(m=null,u=!1):u&&d.addMapping({source:g.source,original:{line:g.line,column:g.column},generated:{line:f.line,column:f.column},name:g.name})):f.column++}),this.walkSourceContents(function(p,g){d.setSourceContent(p,g)}),{code:f.code,map:d}},Yr.SourceNode=a,Yr}var ni;function Il(){return ni||(ni=1,lt.SourceMapGenerator=$i().SourceMapGenerator,lt.SourceMapConsumer=Al().SourceMapConsumer,lt.SourceNode=Rl().SourceNode),lt}var si;function Ll(){return si||(si=1,function(n,e){e.__esModule=!0;var t=Z(),r=void 0;try{var s=Il();r=s.SourceNode}catch{}r||(r=function(h,f,d,u){this.src="",u&&this.add(u)},r.prototype={add:function(f){t.isArray(f)&&(f=f.join("")),this.src+=f},prepend:function(f){t.isArray(f)&&(f=f.join("")),this.src=f+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});function a(h,f,d){if(t.isArray(h)){for(var u=[],m=0,l=h.length;m<l;m++)u.push(f.wrap(h[m],d));return u}else if(typeof h=="boolean"||typeof h=="number")return h+"";return h}function c(h){this.srcFile=h,this.source=[]}c.prototype={isEmpty:function(){return!this.source.length},prepend:function(f,d){this.source.unshift(this.wrap(f,d))},push:function(f,d){this.source.push(this.wrap(f,d))},merge:function(){var f=this.empty();return this.each(function(d){f.add(["  ",d,`
`])}),f},each:function(f){for(var d=0,u=this.source.length;d<u;d++)f(this.source[d])},empty:function(){var f=this.currentLocation||{start:{}};return new r(f.start.line,f.start.column,this.srcFile)},wrap:function(f){var d=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];return f instanceof r?f:(f=a(f,this,d),new r(d.start.line,d.start.column,this.srcFile,f))},functionCall:function(f,d,u){return u=this.generateList(u),this.wrap([f,d?"."+d+"(":"(",u,")"])},quotedString:function(f){return'"'+(f+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(f){var d=this,u=[];Object.keys(f).forEach(function(l){var o=a(f[l],d);o!=="undefined"&&u.push([d.quotedString(l),":",o])});var m=this.generateList(u);return m.prepend("{"),m.add("}"),m},generateList:function(f){for(var d=this.empty(),u=0,m=f.length;u<m;u++)u&&d.add(","),d.add(a(f[u],this));return d},generateArray:function(f){var d=this.generateList(f);return d.prepend("["),d.add("]"),d}},e.default=c,n.exports=e.default}(Yt,Yt.exports)),Yt.exports}var ii;function Ol(){return ii||(ii=1,function(n,e){e.__esModule=!0;function t(l){return l&&l.__esModule?l:{default:l}}var r=Pn(),s=fe(),a=t(s),c=Z(),h=Ll(),f=t(h);function d(l){this.value=l}function u(){}u.prototype={nameLookup:function(o,i){return this.internalNameLookup(o,i)},depthedLookup:function(o){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(o),")"]},compilerInfo:function(){var o=r.COMPILER_REVISION,i=r.REVISION_CHANGES[o];return[o,i]},appendToBuffer:function(o,i,p){return c.isArray(o)||(o=[o]),o=this.source.wrap(o,i),this.environment.isSimple?["return ",o,";"]:p?["buffer += ",o,";"]:(o.appendToBuffer=!0,o)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(o,i){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",o,",",JSON.stringify(i),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(o,i,p,g){this.environment=o,this.options=i,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!g,this.name=this.environment.name,this.isChild=!!p,this.context=p||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(o,i),this.useDepths=this.useDepths||o.useDepths||o.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||o.useBlockParams;var y=o.opcodes,v=void 0,b=void 0,_=void 0,w=void 0;for(_=0,w=y.length;_<w;_++)v=y[_],this.source.currentLocation=v.loc,b=b||v.loc,this[v.opcode].apply(this,v.args);if(this.source.currentLocation=b,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),g?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge()));var S=this.createFunctionContext(g);if(this.isChild)return S;var C={compiler:this.compilerInfo(),main:S};this.decorators&&(C.main_d=this.decorators,C.useDecorators=!0);var k=this.context,A=k.programs,P=k.decorators;for(_=0,w=A.length;_<w;_++)A[_]&&(C[_]=A[_],P[_]&&(C[_+"_d"]=P[_],C.useDecorators=!0));return this.environment.usePartial&&(C.usePartial=!0),this.options.data&&(C.useData=!0),this.useDepths&&(C.useDepths=!0),this.useBlockParams&&(C.useBlockParams=!0),this.options.compat&&(C.compat=!0),g?C.compilerOptions=this.options:(C.compiler=JSON.stringify(C.compiler),this.source.currentLocation={start:{line:1,column:0}},C=this.objectLiteral(C),i.srcName?(C=C.toStringWithSourceMap({file:i.destName}),C.map=C.map&&C.map.toString()):C=C.toString()),C},preamble:function(){this.lastContext=0,this.source=new f.default(this.options.srcName),this.decorators=new f.default(this.options.srcName)},createFunctionContext:function(o){var i=this,p="",g=this.stackVars.concat(this.registers.list);g.length>0&&(p+=", "+g.join(", "));var y=0;Object.keys(this.aliases).forEach(function(_){var w=i.aliases[_];w.children&&w.referenceCount>1&&(p+=", alias"+ ++y+"="+_,w.children[0]="alias"+y)}),this.lookupPropertyFunctionIsUsed&&(p+=", "+this.lookupPropertyFunctionVarDeclaration());var v=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&v.push("blockParams"),this.useDepths&&v.push("depths");var b=this.mergeSource(p);return o?(v.push(b),Function.apply(this,v)):this.source.wrap(["function(",v.join(","),`) {
  `,b,"}"])},mergeSource:function(o){var i=this.environment.isSimple,p=!this.forceBuffer,g=void 0,y=void 0,v=void 0,b=void 0;return this.source.each(function(_){_.appendToBuffer?(v?_.prepend("  + "):v=_,b=_):(v&&(y?v.prepend("buffer += "):g=!0,b.add(";"),v=b=void 0),y=!0,i||(p=!1))}),p?v?(v.prepend("return "),b.add(";")):y||this.source.push('return "";'):(o+=", buffer = "+(g?"":this.initializeBuffer()),v?(v.prepend("return buffer + "),b.add(";")):this.source.push("return buffer;")),o&&this.source.prepend("var "+o.substring(2)+(g?"":`;
`)),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function(o){var i=this.aliasable("container.hooks.blockHelperMissing"),p=[this.contextName(0)];this.setupHelperArgs(o,0,p);var g=this.popStack();p.splice(1,0,g),this.push(this.source.functionCall(i,"call",p))},ambiguousBlockValue:function(){var o=this.aliasable("container.hooks.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs("",0,i,!0),this.flushInline();var p=this.topStack();i.splice(1,0,p),this.pushSource(["if (!",this.lastHelper,") { ",p," = ",this.source.functionCall(o,"call",i),"}"])},appendContent:function(o){this.pendingContent?o=this.pendingContent+o:this.pendingLocation=this.source.currentLocation,this.pendingContent=o},append:function(){if(this.isInline())this.replaceStack(function(i){return[" != null ? ",i,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var o=this.popStack();this.pushSource(["if (",o," != null) { ",this.appendToBuffer(o,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(o){this.lastContext=o},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(o,i,p,g){var y=0;!g&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(o[y++])):this.pushContext(),this.resolvePath("context",o,y,i,p)},lookupBlockParam:function(o,i){this.useBlockParams=!0,this.push(["blockParams[",o[0],"][",o[1],"]"]),this.resolvePath("context",i,1)},lookupData:function(o,i,p){o?this.pushStackLiteral("container.data(data, "+o+")"):this.pushStackLiteral("data"),this.resolvePath("data",i,0,!0,p)},resolvePath:function(o,i,p,g,y){var v=this;if(this.options.strict||this.options.assumeObjects){this.push(m(this.options.strict&&y,this,i,p,o));return}for(var b=i.length;p<b;p++)this.replaceStack(function(_){var w=v.nameLookup(_,i[p],o);return g?[" && ",w]:[" != null ? ",w," : ",_]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(o,i){this.pushContext(),this.pushString(i),i!=="SubExpression"&&(typeof o=="string"?this.pushString(o):this.pushStackLiteral(o))},emptyHash:function(o){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(o?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var o=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(o.ids)),this.stringParams&&(this.push(this.objectLiteral(o.contexts)),this.push(this.objectLiteral(o.types))),this.push(this.objectLiteral(o.values))},pushString:function(o){this.pushStackLiteral(this.quotedString(o))},pushLiteral:function(o){this.pushStackLiteral(o)},pushProgram:function(o){o!=null?this.pushStackLiteral(this.programExpression(o)):this.pushStackLiteral(null)},registerDecorator:function(o,i){var p=this.nameLookup("decorators",i,"decorator"),g=this.setupHelperArgs(i,o);this.decorators.push(["fn = ",this.decorators.functionCall(p,"",["fn","props","container",g])," || fn;"])},invokeHelper:function(o,i,p){var g=this.popStack(),y=this.setupHelper(o,i),v=[];p&&v.push(y.name),v.push(g),this.options.strict||v.push(this.aliasable("container.hooks.helperMissing"));var b=["(",this.itemsSeparatedBy(v,"||"),")"],_=this.source.functionCall(b,"call",y.callParams);this.push(_)},itemsSeparatedBy:function(o,i){var p=[];p.push(o[0]);for(var g=1;g<o.length;g++)p.push(i,o[g]);return p},invokeKnownHelper:function(o,i){var p=this.setupHelper(o,i);this.push(this.source.functionCall(p.name,"call",p.callParams))},invokeAmbiguous:function(o,i){this.useRegister("helper");var p=this.popStack();this.emptyHash();var g=this.setupHelper(0,o,i),y=this.lastHelper=this.nameLookup("helpers",o,"helper"),v=["(","(helper = ",y," || ",p,")"];this.options.strict||(v[0]="(helper = ",v.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",v,g.paramsInit?["),(",g.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",g.callParams)," : helper))"])},invokePartial:function(o,i,p){var g=[],y=this.setupParams(i,1,g);o&&(i=this.popStack(),delete y.name),p&&(y.indent=JSON.stringify(p)),y.helpers="helpers",y.partials="partials",y.decorators="container.decorators",o?g.unshift(i):g.unshift(this.nameLookup("partials",i,"partial")),this.options.compat&&(y.depths="depths"),y=this.objectLiteral(y),g.push(y),this.push(this.source.functionCall("container.invokePartial","",g))},assignToHash:function(o){var i=this.popStack(),p=void 0,g=void 0,y=void 0;this.trackIds&&(y=this.popStack()),this.stringParams&&(g=this.popStack(),p=this.popStack());var v=this.hash;p&&(v.contexts[o]=p),g&&(v.types[o]=g),y&&(v.ids[o]=y),v.values[o]=i},pushId:function(o,i,p){o==="BlockParam"?this.pushStackLiteral("blockParams["+i[0]+"].path["+i[1]+"]"+(p?" + "+JSON.stringify("."+p):"")):o==="PathExpression"?this.pushString(i):o==="SubExpression"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(o,i){for(var p=o.children,g=void 0,y=void 0,v=0,b=p.length;v<b;v++){g=p[v],y=new this.compiler;var _=this.matchExistingProgram(g);if(_==null){this.context.programs.push("");var w=this.context.programs.length;g.index=w,g.name="program"+w,this.context.programs[w]=y.compile(g,i,this.context,!this.precompile),this.context.decorators[w]=y.decorators,this.context.environments[w]=g,this.useDepths=this.useDepths||y.useDepths,this.useBlockParams=this.useBlockParams||y.useBlockParams,g.useDepths=this.useDepths,g.useBlockParams=this.useBlockParams}else g.index=_.index,g.name="program"+_.index,this.useDepths=this.useDepths||_.useDepths,this.useBlockParams=this.useBlockParams||_.useBlockParams}},matchExistingProgram:function(o){for(var i=0,p=this.context.environments.length;i<p;i++){var g=this.context.environments[i];if(g&&g.equals(o))return g}},programExpression:function(o){var i=this.environment.children[o],p=[i.index,"data",i.blockParams];return(this.useBlockParams||this.useDepths)&&p.push("blockParams"),this.useDepths&&p.push("depths"),"container.program("+p.join(", ")+")"},useRegister:function(o){this.registers[o]||(this.registers[o]=!0,this.registers.list.push(o))},push:function(o){return o instanceof d||(o=this.source.wrap(o)),this.inlineStack.push(o),o},pushStackLiteral:function(o){this.push(new d(o))},pushSource:function(o){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),o&&this.source.push(o)},replaceStack:function(o){var i=["("],p=void 0,g=void 0,y=void 0;if(!this.isInline())throw new a.default("replaceStack on non-inline");var v=this.popStack(!0);if(v instanceof d)p=[v.value],i=["(",p],y=!0;else{g=!0;var b=this.incrStack();i=["((",this.push(b)," = ",v,")"],p=this.topStack()}var _=o.call(this,p);y||this.popStack(),g&&this.stackSlot--,this.push(i.concat(_,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var o=this.inlineStack;this.inlineStack=[];for(var i=0,p=o.length;i<p;i++){var g=o[i];if(g instanceof d)this.compileStack.push(g);else{var y=this.incrStack();this.pushSource([y," = ",g,";"]),this.compileStack.push(y)}}},isInline:function(){return this.inlineStack.length},popStack:function(o){var i=this.isInline(),p=(i?this.inlineStack:this.compileStack).pop();if(!o&&p instanceof d)return p.value;if(!i){if(!this.stackSlot)throw new a.default("Invalid stack pop");this.stackSlot--}return p},topStack:function(){var o=this.isInline()?this.inlineStack:this.compileStack,i=o[o.length-1];return i instanceof d?i.value:i},contextName:function(o){return this.useDepths&&o?"depths["+o+"]":"depth"+o},quotedString:function(o){return this.source.quotedString(o)},objectLiteral:function(o){return this.source.objectLiteral(o)},aliasable:function(o){var i=this.aliases[o];return i?(i.referenceCount++,i):(i=this.aliases[o]=this.source.wrap(o),i.aliasable=!0,i.referenceCount=1,i)},setupHelper:function(o,i,p){var g=[],y=this.setupHelperArgs(i,o,g,p),v=this.nameLookup("helpers",i,"helper"),b=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:g,paramsInit:y,name:v,callParams:[b].concat(g)}},setupParams:function(o,i,p){var g={},y=[],v=[],b=[],_=!p,w=void 0;_&&(p=[]),g.name=this.quotedString(o),g.hash=this.popStack(),this.trackIds&&(g.hashIds=this.popStack()),this.stringParams&&(g.hashTypes=this.popStack(),g.hashContexts=this.popStack());var S=this.popStack(),C=this.popStack();(C||S)&&(g.fn=C||"container.noop",g.inverse=S||"container.noop");for(var k=i;k--;)w=this.popStack(),p[k]=w,this.trackIds&&(b[k]=this.popStack()),this.stringParams&&(v[k]=this.popStack(),y[k]=this.popStack());return _&&(g.args=this.source.generateArray(p)),this.trackIds&&(g.ids=this.source.generateArray(b)),this.stringParams&&(g.types=this.source.generateArray(v),g.contexts=this.source.generateArray(y)),this.options.data&&(g.data="data"),this.useBlockParams&&(g.blockParams="blockParams"),g},setupHelperArgs:function(o,i,p,g){var y=this.setupParams(o,i,p);return y.loc=JSON.stringify(this.source.currentLocation),y=this.objectLiteral(y),g?(this.useRegister("options"),p.push("options"),["options=",y]):p?(p.push(y),""):y}},function(){for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),o=u.RESERVED_WORDS={},i=0,p=l.length;i<p;i++)o[l[i]]=!0}(),u.isValidJavaScriptVariableName=function(l){return!u.RESERVED_WORDS[l]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(l)};function m(l,o,i,p,g){var y=o.popStack(),v=i.length;for(l&&v--;p<v;p++)y=o.nameLookup(y,i[p],g);return l?[o.aliasable("container.strict"),"(",y,", ",o.quotedString(i[p]),", ",JSON.stringify(o.source.currentLocation)," )"]:y}e.default=u,n.exports=e.default}(zt,zt.exports)),zt.exports}var ai;function Ml(){return ai||(ai=1,function(n,e){e.__esModule=!0;function t(v){return v&&v.__esModule?v:{default:v}}var r=vl(),s=t(r),a=Wi(),c=t(a),h=Sl(),f=Cl(),d=Ol(),u=t(d),m=Vi(),l=t(m),o=Ui(),i=t(o),p=s.default.create;function g(){var v=p();return v.compile=function(b,_){return f.compile(b,_,v)},v.precompile=function(b,_){return f.precompile(b,_,v)},v.AST=c.default,v.Compiler=f.Compiler,v.JavaScriptCompiler=u.default,v.Parser=h.parser,v.parse=h.parse,v.parseWithoutProcessing=h.parseWithoutProcessing,v}var y=g();y.create=g,i.default(y),y.Visitor=l.default,y.default=y,e.default=y,n.exports=e.default}(It,It.exports)),It.exports}var Nl=Ml();const Tl=sl(Nl),fn="RFC3986",dn={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},Bl="RFC1738",Dl=Array.isArray,pe=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),Zr=1024,Fl=(n,e,t,r,s)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let c="";for(let h=0;h<a.length;h+=Zr){const f=a.length>=Zr?a.slice(h,h+Zr):a,d=[];for(let u=0;u<f.length;++u){let m=f.charCodeAt(u);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||s===Bl&&(m===40||m===41)){d[d.length]=f.charAt(u);continue}if(m<128){d[d.length]=pe[m];continue}if(m<2048){d[d.length]=pe[192|m>>6]+pe[128|m&63];continue}if(m<55296||m>=57344){d[d.length]=pe[224|m>>12]+pe[128|m>>6&63]+pe[128|m&63];continue}u+=1,m=65536+((m&1023)<<10|f.charCodeAt(u)&1023),d[d.length]=pe[240|m>>18]+pe[128|m>>12&63]+pe[128|m>>6&63]+pe[128|m&63]}c+=d.join("")}return c};function ql(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function oi(n,e){if(Dl(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const Hl=Object.prototype.hasOwnProperty,ji={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},me=Array.isArray,Ul=Array.prototype.push,Ki=function(n,e){Ul.apply(n,me(e)?e:[e])},Wl=Date.prototype.toISOString,W={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Fl,encodeValuesOnly:!1,format:fn,formatter:dn[fn],indices:!1,serializeDate(n){return Wl.call(n)},skipNulls:!1,strictNullHandling:!1};function Vl(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const en={};function Xi(n,e,t,r,s,a,c,h,f,d,u,m,l,o,i,p,g,y){let v=n,b=y,_=0,w=!1;for(;(b=b.get(en))!==void 0&&!w;){const P=b.get(n);if(_+=1,typeof P<"u"){if(P===_)throw new RangeError("Cyclic object value");w=!0}typeof b.get(en)>"u"&&(_=0)}if(typeof d=="function"?v=d(e,v):v instanceof Date?v=l==null?void 0:l(v):t==="comma"&&me(v)&&(v=oi(v,function(P){return P instanceof Date?l==null?void 0:l(P):P})),v===null){if(a)return f&&!p?f(e,W.encoder,g,"key",o):e;v=""}if(Vl(v)||ql(v)){if(f){const P=p?e:f(e,W.encoder,g,"key",o);return[(i==null?void 0:i(P))+"="+(i==null?void 0:i(f(v,W.encoder,g,"value",o)))]}return[(i==null?void 0:i(e))+"="+(i==null?void 0:i(String(v)))]}const S=[];if(typeof v>"u")return S;let C;if(t==="comma"&&me(v))p&&f&&(v=oi(v,f)),C=[{value:v.length>0?v.join(",")||null:void 0}];else if(me(d))C=d;else{const P=Object.keys(v);C=u?P.sort(u):P}const k=h?String(e).replace(/\./g,"%2E"):String(e),A=r&&me(v)&&v.length===1?k+"[]":k;if(s&&me(v)&&v.length===0)return A+"[]";for(let P=0;P<C.length;++P){const x=C[P],E=typeof x=="object"&&typeof x.value<"u"?x.value:v[x];if(c&&E===null)continue;const N=m&&h?x.replace(/\./g,"%2E"):x,I=me(v)?typeof t=="function"?t(A,N):A:A+(m?"."+N:"["+N+"]");y.set(n,_);const T=new WeakMap;T.set(en,y),Ki(S,Xi(E,I,t,r,s,a,c,h,t==="comma"&&p&&me(v)?null:f,d,u,m,l,o,i,p,g,T))}return S}function Gl(n=W){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||W.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=fn;if(typeof n.format<"u"){if(!Hl.call(dn,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=dn[t];let s=W.filter;(typeof n.filter=="function"||me(n.filter))&&(s=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in ji?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=W.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:W.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:W.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:W.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:W.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?W.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:W.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:W.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:W.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:W.encodeValuesOnly,filter:s,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:W.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:W.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:W.strictNullHandling}}function Jl(n,e={}){let t=n;const r=Gl(e);let s,a;typeof r.filter=="function"?(a=r.filter,t=a("",t)):me(r.filter)&&(a=r.filter,s=a);const c=[];if(typeof t!="object"||t===null)return"";const h=ji[r.arrayFormat],f=h==="comma"&&r.commaRoundTrip;s||(s=Object.keys(t)),r.sort&&s.sort(r.sort);const d=new WeakMap;for(let l=0;l<s.length;++l){const o=s[l];r.skipNulls&&t[o]===null||Ki(c,Xi(t[o],o,h,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const u=c.join(r.delimiter);let m=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),u.length>0?m+u:""}const Ke="4.100.0";let li=!1,_t,Qi,zi,pn,Yi,Zi,ea,ta,ra;function $l(n,e={auto:!1}){if(li)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(_t)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${_t}'\``);li=e.auto,_t=n.kind,Qi=n.fetch,zi=n.FormData,pn=n.File,Yi=n.ReadableStream,Zi=n.getMultipartRequestOptions,ea=n.getDefaultAgent,ta=n.fileFromPath,ra=n.isFsReadStream}class jl{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Kl({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import â¦ from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,s,a;try{t=fetch,r=Request,s=Response,a=Headers}catch(c){throw new Error(`this environment is missing the following Web Fetch API type: ${c.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(c,h)=>({...h,body:new jl(c)}),getDefaultAgent:c=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:c=>!1}}const na=()=>{_t||$l(Kl(),{auto:!0})};na();class L extends Error{}class $ extends L{constructor(e,t,r,s){super(`${$.makeMessage(e,t,r)}`),this.status=e,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,r){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,r,s){if(!e||!s)return new Pr({message:r,cause:gn(t)});const a=t==null?void 0:t.error;return e===400?new sa(e,a,r,s):e===401?new ia(e,a,r,s):e===403?new aa(e,a,r,s):e===404?new oa(e,a,r,s):e===409?new la(e,a,r,s):e===422?new ua(e,a,r,s):e===429?new ca(e,a,r,s):e>=500?new ha(e,a,r,s):new $(e,a,r,s)}}class oe extends ${constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Pr extends ${constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class kn extends Pr{constructor({message:e}={}){super({message:e??"Request timed out."})}}class sa extends ${}class ia extends ${}class aa extends ${}class oa extends ${}class la extends ${}class ua extends ${}class ca extends ${}class ha extends ${}class fa extends L{constructor(){super("Could not parse response content as the length limit was reached")}}class da extends L{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var tr=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Ne=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},se;class kr{constructor(){se.set(this,void 0),this.buffer=new Uint8Array,tr(this,se,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const s=[];let a;for(;(a=Xl(this.buffer,Ne(this,se,"f")))!=null;){if(a.carriage&&Ne(this,se,"f")==null){tr(this,se,a.index,"f");continue}if(Ne(this,se,"f")!=null&&(a.index!==Ne(this,se,"f")+1||a.carriage)){s.push(this.decodeText(this.buffer.slice(0,Ne(this,se,"f")-1))),this.buffer=this.buffer.slice(Ne(this,se,"f")),tr(this,se,null,"f");continue}const c=Ne(this,se,"f")!==null?a.preceding-1:a.preceding,h=this.decodeText(this.buffer.slice(0,c));s.push(h),this.buffer=this.buffer.slice(a.index),tr(this,se,null,"f")}return s}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new L(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new L(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new L("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}se=new WeakMap;kr.NEWLINE_CHARS=new Set([`
`,"\r"]);kr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Xl(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function Ql(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}function pa(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class _e{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const c of zl(e,t))if(!a){if(c.data.startsWith("[DONE]")){a=!0;continue}if(c.event===null||c.event.startsWith("response.")||c.event.startsWith("transcript.")){let h;try{h=JSON.parse(c.data)}catch(f){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),f}if(h&&h.error)throw new $(void 0,h.error,void 0,ba(e.headers));yield h}else{let h;try{h=JSON.parse(c.data)}catch(f){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),f}if(c.event=="error")throw new $(void 0,h.error,h.message,void 0);yield{event:c.event,data:h}}}a=!0}catch(c){if(c instanceof Error&&c.name==="AbortError")return;throw c}finally{a||t.abort()}}return new _e(s,t)}static fromReadableStream(e,t){let r=!1;async function*s(){const c=new kr,h=pa(e);for await(const f of h)for(const d of c.decode(f))yield d;for(const f of c.flush())yield f}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of s())c||h&&(yield JSON.parse(h));c=!0}catch(h){if(h instanceof Error&&h.name==="AbortError")return;throw h}finally{c||t.abort()}}return new _e(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const c=r.next();e.push(c),t.push(c)}return a.shift()}});return[new _e(()=>s(e),this.controller),new _e(()=>s(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new Yi({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:c}=await t.next();if(c)return s.close();const h=r.encode(JSON.stringify(a)+`
`);s.enqueue(h)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)==null?void 0:s.call(t))}})}}async function*zl(n,e){if(!n.body)throw e.abort(),new L("Attempted to iterate over a response with no body");const t=new Zl,r=new kr,s=pa(n.body);for await(const a of Yl(s))for(const c of r.decode(a)){const h=t.decode(c);h&&(yield h)}for(const a of r.flush()){const c=t.decode(a);c&&(yield c)}}async function*Yl(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=Ql(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class Zl{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,s]=eu(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function eu(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const ma=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",ga=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Er(n),Er=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",tu=n=>ga(n)||ma(n)||ra(n);async function _a(n,e,t){var s;if(n=await n,ga(n))return n;if(ma(n)){const a=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const c=Er(a)?[await a.arrayBuffer()]:[a];return new pn(c,e,t)}const r=await ru(n);if(e||(e=su(n)??"unknown_file"),!(t!=null&&t.type)){const a=(s=r[0])==null?void 0:s.type;typeof a=="string"&&(t={...t,type:a})}return new pn(r,e,t)}async function ru(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(Er(n))e.push(await n.arrayBuffer());else if(iu(n))for await(const r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${nu(n)}`);return e}function nu(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function su(n){var e;return tn(n.name)||tn(n.filename)||((e=tn(n.path))==null?void 0:e.split(/[\\/]/).pop())}const tn=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},iu=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",ui=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",et=async n=>{const e=await au(n.body);return Zi(e,n)},au=async n=>{const e=new zi;return await Promise.all(Object.entries(n||{}).map(([t,r])=>mn(e,t,r))),e},mn=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(tu(t)){const r=await _a(t);n.append(e,r)}else if(Array.isArray(t))await Promise.all(t.map(r=>mn(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,s])=>mn(n,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var ze={},ou=function(n,e,t,r,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},lu=function(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},rr;na();async function va(n){var c;const{response:e}=n;if(n.options.stream)return Re("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):_e.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type"),r=(c=t==null?void 0:t.split(";")[0])==null?void 0:c.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const h=await e.json();return Re("response",e.status,e.url,e.headers,h),ya(h,e)}const a=await e.text();return Re("response",e.status,e.url,e.headers,a),a}function ya(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Ar extends Promise{constructor(e,t=va){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Ar(this.responsePromise,async t=>ya(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class uu{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:s,fetch:a}){this.baseURL=e,this.maxRetries=rn("maxRetries",t),this.timeout=rn("timeout",r),this.httpAgent=s,this.fetch=a??Qi}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...pu(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${vu()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async s=>{const a=s&&Er(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:e,path:t,...s,body:a}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var p;const r={...e},{method:s,path:a,query:c,headers:h={}}=r,f=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:ui(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,d=this.calculateContentLength(f),u=this.buildURL(a,c);"timeout"in r&&rn("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const m=r.httpAgent??this.httpAgent??ea(u),l=r.timeout+1e3;typeof((p=m==null?void 0:m.options)==null?void 0:p.timeout)=="number"&&l>(m.options.timeout??0)&&(m.options.timeout=l),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),h[this.idempotencyHeader]=e.idempotencyKey);const o=this.buildHeaders({options:r,headers:h,contentLength:d,retryCount:t});return{req:{method:s,...f&&{body:f},headers:o,...m&&{agent:m},signal:r.signal??null},url:u,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:s}){const a={};r&&(a["content-length"]=r);const c=this.defaultHeaders(e);return di(a,c),di(a,t),ui(e.body)&&_t!=="node"&&delete a["content-type"],sr(c,"x-stainless-retry-count")===void 0&&sr(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),sr(c,"x-stainless-timeout")===void 0&&sr(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,s){return $.generate(e,t,r,s)}request(e,t=null){return new Ar(this.makeRequest(e,t))}async makeRequest(e,t){var m,l;const r=await e,s=r.maxRetries??this.maxRetries;t==null&&(t=s),await this.prepareOptions(r);const{req:a,url:c,timeout:h}=this.buildRequest(r,{retryCount:s-t});if(await this.prepareRequest(a,{url:c,options:r}),Re("request",c,r,a.headers),(m=r.signal)!=null&&m.aborted)throw new oe;const f=new AbortController,d=await this.fetchWithTimeout(c,a,h,f).catch(gn);if(d instanceof Error){if((l=r.signal)!=null&&l.aborted)throw new oe;if(t)return this.retryRequest(r,t);throw d.name==="AbortError"?new kn:new Pr({cause:d})}const u=ba(d.headers);if(!d.ok){if(t&&this.shouldRetry(d)){const v=`retrying, ${t} attempts remaining`;return Re(`response (error; ${v})`,d.status,c,u),this.retryRequest(r,t,u)}const o=await d.text().catch(v=>gn(v).message),i=mu(o),p=i?void 0:o;throw Re(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,d.status,c,u,p),this.makeStatusError(d.status,i,p,u)}return{response:d,options:r,controller:f}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new cu(this,r,e)}buildURL(e,t){const r=_u(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Sa(s)||(t={...s,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new L(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,s){const{signal:a,...c}=t||{};a&&a.addEventListener("abort",()=>s.abort());const h=setTimeout(()=>s.abort(),r),f={signal:s.signal,...c};return f.method&&(f.method=f.method.toUpperCase()),this.fetch.call(void 0,e,f).finally(()=>{clearTimeout(h)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let s;const a=r==null?void 0:r["retry-after-ms"];if(a){const h=parseFloat(a);Number.isNaN(h)||(s=h)}const c=r==null?void 0:r["retry-after"];if(c&&!s){const h=parseFloat(c);Number.isNaN(h)?s=Date.parse(c)-Date.now():s=h*1e3}if(!(s&&0<=s&&s<60*1e3)){const h=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(t,h)}return await Ct(s),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,c=Math.min(.5*Math.pow(2,a),8),h=1-Math.random()*.25;return c*h*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Ke}`}}class wa{constructor(e,t,r,s){rr.set(this,void 0),ou(this,rr,e),this.options=s,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new L("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[s,a]of r)e.url.searchParams.set(s,a);t.query=void 0,t.path=e.url.toString()}return await lu(this,rr,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(rr=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class cu extends Ar{constructor(e,t,r){super(t,async s=>new r(e,s.response,await va(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const ba=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),hu={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},H=n=>typeof n=="object"&&n!==null&&!Sa(n)&&Object.keys(n).every(e=>Ca(hu,e)),fu=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ke,"X-Stainless-OS":hi(Deno.build.os),"X-Stainless-Arch":ci(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ke,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ke,"X-Stainless-OS":hi(process.platform),"X-Stainless-Arch":ci(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=du();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ke,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ke,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function du(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,c=r[3]||0;return{browser:e,version:`${s}.${a}.${c}`}}}return null}const ci=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",hi=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let fi;const pu=()=>fi??(fi=fu()),mu=n=>{try{return JSON.parse(n)}catch{return}},gu=/^[a-z][a-z0-9+.-]*:/i,_u=n=>gu.test(n),Ct=n=>new Promise(e=>setTimeout(e,n)),rn=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new L(`${n} must be an integer`);if(e<0)throw new L(`${n} must be a positive integer`);return e},gn=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},nr=n=>{var e,t,r,s;if(typeof process<"u")return((e=ze==null?void 0:ze[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(r=(t=Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:s.trim()};function Sa(n){if(!n)return!0;for(const e in n)return!1;return!0}function Ca(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function di(n,e){for(const t in e){if(!Ca(e,t))continue;const r=t.toLowerCase();if(!r)continue;const s=e[t];s===null?delete n[r]:s!==void 0&&(n[r]=s)}}const pi=new Set(["authorization","api-key"]);function Re(n,...e){if(typeof process<"u"&&(ze==null?void 0:ze.DEBUG)==="true"){const t=e.map(r=>{if(!r)return r;if(r.headers){const a={...r,headers:{...r.headers}};for(const c in r.headers)pi.has(c.toLowerCase())&&(a.headers[c]="REDACTED");return a}let s=null;for(const a in r)pi.has(a.toLowerCase())&&(s??(s={...r}),s[a]="REDACTED");return s??r});console.log(`OpenAI:DEBUG:${n}`,...t)}}const vu=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),yu=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",wu=n=>typeof(n==null?void 0:n.get)=="function",sr=(n,e)=>{var r;const t=e.toLowerCase();if(wu(n)){const s=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,c,h)=>c+h.toUpperCase());for(const a of[e,t,e.toUpperCase(),s]){const c=n.get(a);if(c)return c}}for(const[s,a]of Object.entries(n))if(s.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},bu=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};function nn(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class Rr extends wa{constructor(e,t,r,s){super(e,t,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class j extends wa{constructor(e,t,r,s){super(e,t,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const t=(r=e[e.length-1])==null?void 0:r.id;return t?{params:{after:t}}:null}}class O{constructor(e){this._client=e}}let xa=class extends O{list(e,t={},r){return H(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,Su,{query:t,...r})}},Ir=class extends O{constructor(){super(...arguments),this.messages=new xa(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/chat/completions",Lr,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class Lr extends j{}class Su extends j{}Ir.ChatCompletionsPage=Lr;Ir.Messages=xa;let Or=class extends O{constructor(){super(...arguments),this.completions=new Ir(this._client)}};Or.Completions=Ir;Or.ChatCompletionsPage=Lr;class Pa extends O{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class ka extends O{create(e,t){return this._client.post("/audio/transcriptions",et({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Ea extends O{create(e,t){return this._client.post("/audio/translations",et({body:e,...t,__metadata:{model:e.model}}))}}class xt extends O{constructor(){super(...arguments),this.transcriptions=new ka(this._client),this.translations=new Ea(this._client),this.speech=new Pa(this._client)}}xt.Transcriptions=ka;xt.Translations=Ea;xt.Speech=Pa;class En extends O{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/batches",An,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class An extends j{}En.BatchesPage=An;var ue=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},q=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},_n,fr,dr,ht,ft,pr,dt,Ce,pt,br,Sr,Xe,Aa;class Rn{constructor(){_n.add(this),this.controller=new AbortController,fr.set(this,void 0),dr.set(this,()=>{}),ht.set(this,()=>{}),ft.set(this,void 0),pr.set(this,()=>{}),dt.set(this,()=>{}),Ce.set(this,{}),pt.set(this,!1),br.set(this,!1),Sr.set(this,!1),Xe.set(this,!1),ue(this,fr,new Promise((e,t)=>{ue(this,dr,e,"f"),ue(this,ht,t,"f")}),"f"),ue(this,ft,new Promise((e,t)=>{ue(this,pr,e,"f"),ue(this,dt,t,"f")}),"f"),q(this,fr,"f").catch(()=>{}),q(this,ft,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},q(this,_n,"m",Aa).bind(this))},0)}_connected(){this.ended||(q(this,dr,"f").call(this),this._emit("connect"))}get ended(){return q(this,pt,"f")}get errored(){return q(this,br,"f")}get aborted(){return q(this,Sr,"f")}abort(){this.controller.abort()}on(e,t){return(q(this,Ce,"f")[e]||(q(this,Ce,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=q(this,Ce,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===t);return s>=0&&r.splice(s,1),this}once(e,t){return(q(this,Ce,"f")[e]||(q(this,Ce,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{ue(this,Xe,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){ue(this,Xe,!0,"f"),await q(this,ft,"f")}_emit(e,...t){if(q(this,pt,"f"))return;e==="end"&&(ue(this,pt,!0,"f"),q(this,pr,"f").call(this));const r=q(this,Ce,"f")[e];if(r&&(q(this,Ce,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...t))),e==="abort"){const s=t[0];!q(this,Xe,"f")&&!(r!=null&&r.length)&&Promise.reject(s),q(this,ht,"f").call(this,s),q(this,dt,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=t[0];!q(this,Xe,"f")&&!(r!=null&&r.length)&&Promise.reject(s),q(this,ht,"f").call(this,s),q(this,dt,"f").call(this,s),this._emit("end")}}_emitFinal(){}}fr=new WeakMap,dr=new WeakMap,ht=new WeakMap,ft=new WeakMap,pr=new WeakMap,dt=new WeakMap,Ce=new WeakMap,pt=new WeakMap,br=new WeakMap,Sr=new WeakMap,Xe=new WeakMap,_n=new WeakSet,Aa=function(e){if(ue(this,br,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new oe),e instanceof oe)return ue(this,Sr,!0,"f"),this._emit("abort",e);if(e instanceof L)return this._emit("error",e);if(e instanceof Error){const t=new L(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new L(String(e)))};var R=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},ne=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},J,vn,ge,mr,ce,Fe,Qe,De,Cr,ie,gr,_r,vt,mt,gt,mi,gi,_i,vi,yi,wi,bi;class he extends Rn{constructor(){super(...arguments),J.add(this),vn.set(this,[]),ge.set(this,{}),mr.set(this,{}),ce.set(this,void 0),Fe.set(this,void 0),Qe.set(this,void 0),De.set(this,void 0),Cr.set(this,void 0),ie.set(this,void 0),gr.set(this,void 0),_r.set(this,void 0),vt.set(this,void 0)}[(vn=new WeakMap,ge=new WeakMap,mr=new WeakMap,ce=new WeakMap,Fe=new WeakMap,Qe=new WeakMap,De=new WeakMap,Cr=new WeakMap,ie=new WeakMap,gr=new WeakMap,_r=new WeakMap,vt=new WeakMap,J=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,c)=>t.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new he;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=_e.fromReadableStream(e,this.controller);for await(const c of s)R(this,J,"m",mt).call(this,c);if((a=s.controller.signal)!=null&&a.aborted)throw new oe;return this._addRun(R(this,J,"m",gt).call(this))}toReadableStream(){return new _e(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,s,a){const c=new he;return c._run(()=>c._runToolAssistantStream(e,t,r,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),c}async _createToolAssistantStream(e,t,r,s,a){var d;const c=a==null?void 0:a.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort()));const h={...s,stream:!0},f=await e.submitToolOutputs(t,r,h,{...a,signal:this.controller.signal});this._connected();for await(const u of f)R(this,J,"m",mt).call(this,u);if((d=f.controller.signal)!=null&&d.aborted)throw new oe;return this._addRun(R(this,J,"m",gt).call(this))}static createThreadAssistantStream(e,t,r){const s=new he;return s._run(()=>s._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,t,r,s){const a=new he;return a._run(()=>a._runAssistantStream(e,t,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return R(this,gr,"f")}currentRun(){return R(this,_r,"f")}currentMessageSnapshot(){return R(this,ce,"f")}currentRunStepSnapshot(){return R(this,vt,"f")}async finalRunSteps(){return await this.done(),Object.values(R(this,ge,"f"))}async finalMessages(){return await this.done(),Object.values(R(this,mr,"f"))}async finalRun(){if(await this.done(),!R(this,Fe,"f"))throw Error("Final run was not received.");return R(this,Fe,"f")}async _createThreadAssistantStream(e,t,r){var h;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},c=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const f of c)R(this,J,"m",mt).call(this,f);if((h=c.controller.signal)!=null&&h.aborted)throw new oe;return this._addRun(R(this,J,"m",gt).call(this))}async _createAssistantStream(e,t,r,s){var f;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const c={...r,stream:!0},h=await e.create(t,c,{...s,signal:this.controller.signal});this._connected();for await(const d of h)R(this,J,"m",mt).call(this,d);if((f=h.controller.signal)!=null&&f.aborted)throw new oe;return this._addRun(R(this,J,"m",gt).call(this))}static accumulateDelta(e,t){for(const[r,s]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(nn(a)&&nn(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(c=>typeof c=="string"||typeof c=="number")){a.push(...s);continue}for(const c of s){if(!nn(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const h=c.index;if(h==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const f=a[h];f==null?a.push(c):a[h]=this.accumulateDelta(f,c)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,s){return await this._createAssistantStream(t,e,r,s)}async _runToolAssistantStream(e,t,r,s,a){return await this._createToolAssistantStream(r,e,t,s,a)}}mt=function(e){if(!this.ended)switch(ne(this,gr,e,"f"),R(this,J,"m",_i).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":R(this,J,"m",bi).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":R(this,J,"m",gi).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":R(this,J,"m",mi).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},gt=function(){if(this.ended)throw new L("stream has ended, this shouldn't happen");if(!R(this,Fe,"f"))throw Error("Final run has not been received");return R(this,Fe,"f")},mi=function(e){const[t,r]=R(this,J,"m",yi).call(this,e,R(this,ce,"f"));ne(this,ce,t,"f"),R(this,mr,"f")[t.id]=t;for(const s of r){const a=t.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,c=t.content[s.index];if(c&&c.type=="text")this._emit("textDelta",a,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=R(this,Qe,"f")){if(R(this,De,"f"))switch(R(this,De,"f").type){case"text":this._emit("textDone",R(this,De,"f").text,R(this,ce,"f"));break;case"image_file":this._emit("imageFileDone",R(this,De,"f").image_file,R(this,ce,"f"));break}ne(this,Qe,s.index,"f")}ne(this,De,t.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(R(this,Qe,"f")!==void 0){const s=e.data.content[R(this,Qe,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,R(this,ce,"f"));break;case"text":this._emit("textDone",s.text,R(this,ce,"f"));break}}R(this,ce,"f")&&this._emit("messageDone",e.data),ne(this,ce,void 0,"f")}},gi=function(e){const t=R(this,J,"m",vi).call(this,e);switch(ne(this,vt,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==R(this,Cr,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(R(this,ie,"f")&&this._emit("toolCallDone",R(this,ie,"f")),ne(this,Cr,a.index,"f"),ne(this,ie,t.step_details.tool_calls[a.index],"f"),R(this,ie,"f")&&this._emit("toolCallCreated",R(this,ie,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ne(this,vt,void 0,"f"),e.data.step_details.type=="tool_calls"&&R(this,ie,"f")&&(this._emit("toolCallDone",R(this,ie,"f")),ne(this,ie,void 0,"f")),this._emit("runStepDone",e.data,t);break}},_i=function(e){R(this,vn,"f").push(e),this._emit("event",e)},vi=function(e){switch(e.event){case"thread.run.step.created":return R(this,ge,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=R(this,ge,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=he.accumulateDelta(t,r.delta);R(this,ge,"f")[e.data.id]=s}return R(this,ge,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":R(this,ge,"f")[e.data.id]=e.data;break}if(R(this,ge,"f")[e.data.id])return R(this,ge,"f")[e.data.id];throw new Error("No snapshot available")},yi=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in t.content){let c=t.content[a.index];t.content[a.index]=R(this,J,"m",wi).call(this,a,c)}else t.content[a.index]=a,r.push(a);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},wi=function(e,t){return he.accumulateDelta(t,e)},bi=function(e){switch(ne(this,_r,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":ne(this,Fe,e.data,"f"),R(this,ie,"f")&&(this._emit("toolCallDone",R(this,ie,"f")),ne(this,ie,void 0,"f"));break}};class In extends O{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/assistants",Ln,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Ln extends j{}In.AssistantsPage=Ln;function Si(n){return typeof n.parse=="function"}const Ye=n=>(n==null?void 0:n.role)==="assistant",Ra=n=>(n==null?void 0:n.role)==="function",Ia=n=>(n==null?void 0:n.role)==="tool";function On(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function Pt(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function Cu(n,e){return!e||!La(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:Mn(n,e)}function Mn(n,e){const t=n.choices.map(r=>{var s;if(r.finish_reason==="length")throw new fa;if(r.finish_reason==="content_filter")throw new da;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(a=>Pu(e,a)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?xu(e,r.message.content):null}}});return{...n,choices:t}}function xu(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function Pu(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Pt(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function ku(n,e){var r;if(!n)return!1;const t=(r=n.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return Pt(t)||(t==null?void 0:t.function.strict)||!1}function La(n){var e;return On(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>Pt(t)||t.type==="function"&&t.function.strict===!0))??!1}function Eu(n){for(const e of n??[]){if(e.type!=="function")throw new L(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new L(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var z=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},K,yn,xr,wn,bn,Sn,Oa,Cn;const Ci=10;class Ma extends Rn{constructor(){super(...arguments),K.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Ra(e)||Ia(e))&&e.content)this._emit("functionCallResult",e.content);else if(Ye(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Ye(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new L("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),z(this,K,"m",yn).call(this)}async finalMessage(){return await this.done(),z(this,K,"m",xr).call(this)}async finalFunctionCall(){return await this.done(),z(this,K,"m",wn).call(this)}async finalFunctionCallResult(){return await this.done(),z(this,K,"m",bn).call(this)}async totalUsage(){return await this.done(),z(this,K,"m",Sn).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=z(this,K,"m",xr).call(this);t&&this._emit("finalMessage",t);const r=z(this,K,"m",yn).call(this);r&&this._emit("finalContent",r);const s=z(this,K,"m",wn).call(this);s&&this._emit("finalFunctionCall",s);const a=z(this,K,"m",bn).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",z(this,K,"m",Sn).call(this))}async _createChatCompletion(e,t,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),z(this,K,"m",Oa).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Mn(a,t))}async _runChatCompletion(e,t,r){for(const s of t.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){var l;const s="function",{function_call:a="auto",stream:c,...h}=t,f=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:d=Ci}=r||{},u={};for(const o of t.functions)u[o.name||o.function.name]=o;const m=t.functions.map(o=>({name:o.name||o.function.name,parameters:o.parameters,description:o.description}));for(const o of t.messages)this._addMessage(o,!1);for(let o=0;o<d;++o){const p=(l=(await this._createChatCompletion(e,{...h,function_call:a,functions:m,messages:[...this.messages]},r)).choices[0])==null?void 0:l.message;if(!p)throw new L("missing message in ChatCompletion response");if(!p.function_call)return;const{name:g,arguments:y}=p.function_call,v=u[g];if(v){if(f&&f!==g){const S=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,name:g,content:S});continue}}else{const S=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${m.map(C=>JSON.stringify(C.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:g,content:S});continue}let b;try{b=Si(v)?await v.parse(y):y}catch(S){this._addMessage({role:s,name:g,content:S instanceof Error?S.message:String(S)});continue}const _=await v.function(b,this),w=z(this,K,"m",Cn).call(this,_);if(this._addMessage({role:s,name:g,content:w}),f)return}}async _runTools(e,t,r){var o,i,p;const s="tool",{tool_choice:a="auto",stream:c,...h}=t,f=typeof a!="string"&&((o=a==null?void 0:a.function)==null?void 0:o.name),{maxChatCompletions:d=Ci}=r||{},u=t.tools.map(g=>{if(Pt(g)){if(!g.$callback)throw new L("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),m={};for(const g of u)g.type==="function"&&(m[g.function.name||g.function.function.name]=g.function);const l="tools"in t?u.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of t.messages)this._addMessage(g,!1);for(let g=0;g<d;++g){const v=(i=(await this._createChatCompletion(e,{...h,tool_choice:a,tools:l,messages:[...this.messages]},r)).choices[0])==null?void 0:i.message;if(!v)throw new L("missing message in ChatCompletion response");if(!((p=v.tool_calls)!=null&&p.length))return;for(const b of v.tool_calls){if(b.type!=="function")continue;const _=b.id,{name:w,arguments:S}=b.function,C=m[w];if(C){if(f&&f!==w){const x=`Invalid tool_call: ${JSON.stringify(w)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:_,content:x});continue}}else{const x=`Invalid tool_call: ${JSON.stringify(w)}. Available options are: ${Object.keys(m).map(E=>JSON.stringify(E)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:_,content:x});continue}let k;try{k=Si(C)?await C.parse(S):S}catch(x){const E=x instanceof Error?x.message:String(x);this._addMessage({role:s,tool_call_id:_,content:E});continue}const A=await C.function(k,this),P=z(this,K,"m",Cn).call(this,A);if(this._addMessage({role:s,tool_call_id:_,content:P}),f)return}}}}K=new WeakSet,yn=function(){return z(this,K,"m",xr).call(this).content??null},xr=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Ye(t)){const{function_call:r,...s}=t,a={...s,content:t.content??null,refusal:t.refusal??null};return r&&(a.function_call=r),a}}throw new L("stream ended without producing a ChatCompletionMessage with role=assistant")},wn=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(Ye(s)&&(s!=null&&s.function_call))return s.function_call;if(Ye(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(t=s.tool_calls.at(-1))==null?void 0:t.function}},bn=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Ra(t)&&t.content!=null||Ia(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},Sn=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Oa=function(e){if(e.n!=null&&e.n>1)throw new L("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Cn=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class yt extends Ma{static runFunctions(e,t,r){const s=new yt,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,t,a)),s}static runTools(e,t,r){const s=new yt,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,t,a)),s}_addMessage(e,t=!0){super._addMessage(e,t),Ye(e)&&e.content&&this._emit("content",e.content)}}const Na=1,Ta=2,Ba=4,Da=8,Fa=16,qa=32,Ha=64,Ua=128,Wa=256,Va=Ua|Wa,Ga=Fa|qa|Va|Ha,Ja=Na|Ta|Ga,$a=Ba|Da,Au=Ja|$a,V={STR:Na,NUM:Ta,ARR:Ba,OBJ:Da,NULL:Fa,BOOL:qa,NAN:Ha,INFINITY:Ua,MINUS_INFINITY:Wa,INF:Va,SPECIAL:Ga,ATOM:Ja,COLLECTION:$a,ALL:Au};class Ru extends Error{}class Iu extends Error{}function Lu(n,e=V.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return Ou(n.trim(),e)}const Ou=(n,e)=>{const t=n.length;let r=0;const s=l=>{throw new Ru(`${l} at position ${r}`)},a=l=>{throw new Iu(`${l} at position ${r}`)},c=()=>(m(),r>=t&&s("Unexpected end of input"),n[r]==='"'?h():n[r]==="{"?f():n[r]==="["?d():n.substring(r,r+4)==="null"||V.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||V.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||V.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||V.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||V.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||V.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):u()),h=()=>{const l=r;let o=!1;for(r++;r<t&&(n[r]!=='"'||o&&n[r-1]==="\\");)o=n[r]==="\\"?!o:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(l,++r-Number(o)))}catch(i){a(String(i))}else if(V.STR&e)try{return JSON.parse(n.substring(l,r-Number(o))+'"')}catch{return JSON.parse(n.substring(l,n.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,m();const l={};try{for(;n[r]!=="}";){if(m(),r>=t&&V.OBJ&e)return l;const o=h();m(),r++;try{const i=c();Object.defineProperty(l,o,{value:i,writable:!0,enumerable:!0,configurable:!0})}catch(i){if(V.OBJ&e)return l;throw i}m(),n[r]===","&&r++}}catch{if(V.OBJ&e)return l;s("Expected '}' at end of object")}return r++,l},d=()=>{r++;const l=[];try{for(;n[r]!=="]";)l.push(c()),m(),n[r]===","&&r++}catch{if(V.ARR&e)return l;s("Expected ']' at end of array")}return r++,l},u=()=>{if(r===0){n==="-"&&V.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(n)}catch(o){if(V.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(o))}}const l=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(V.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(n.substring(l,r))}catch{n.substring(l,r)==="-"&&V.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(n.substring(l,n.lastIndexOf("e")))}catch(i){a(String(i))}}},m=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return c()},xi=n=>Lu(n,V.ALL^V.NUM);var Ge=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},B=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},U,Se,Je,Pe,sn,ir,an,on,ln,ar,un,Pi;class wt extends Ma{constructor(e){super(),U.add(this),Se.set(this,void 0),Je.set(this,void 0),Pe.set(this,void 0),Ge(this,Se,e,"f"),Ge(this,Je,[],"f")}get currentChatCompletionSnapshot(){return B(this,Pe,"f")}static fromReadableStream(e){const t=new wt(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const s=new wt(t);return s._run(()=>s._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,t,r){var c;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),B(this,U,"m",sn).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const h of a)B(this,U,"m",an).call(this,h);if((c=a.controller.signal)!=null&&c.aborted)throw new oe;return this._addChatCompletion(B(this,U,"m",ar).call(this))}async _fromReadableStream(e,t){var c;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),B(this,U,"m",sn).call(this),this._connected();const s=_e.fromReadableStream(e,this.controller);let a;for await(const h of s)a&&a!==h.id&&this._addChatCompletion(B(this,U,"m",ar).call(this)),B(this,U,"m",an).call(this,h),a=h.id;if((c=s.controller.signal)!=null&&c.aborted)throw new oe;return this._addChatCompletion(B(this,U,"m",ar).call(this))}[(Se=new WeakMap,Je=new WeakMap,Pe=new WeakMap,U=new WeakSet,sn=function(){this.ended||Ge(this,Pe,void 0,"f")},ir=function(t){let r=B(this,Je,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},B(this,Je,"f")[t.index]=r,r)},an=function(t){var s,a,c,h,f,d,u,m,l,o,i,p,g,y,v;if(this.ended)return;const r=B(this,U,"m",Pi).call(this,t);this._emit("chunk",t,r);for(const b of t.choices){const _=r.choices[b.index];b.delta.content!=null&&((s=_.message)==null?void 0:s.role)==="assistant"&&((a=_.message)!=null&&a.content)&&(this._emit("content",b.delta.content,_.message.content),this._emit("content.delta",{delta:b.delta.content,snapshot:_.message.content,parsed:_.message.parsed})),b.delta.refusal!=null&&((c=_.message)==null?void 0:c.role)==="assistant"&&((h=_.message)!=null&&h.refusal)&&this._emit("refusal.delta",{delta:b.delta.refusal,snapshot:_.message.refusal}),((f=b.logprobs)==null?void 0:f.content)!=null&&((d=_.message)==null?void 0:d.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=b.logprobs)==null?void 0:u.content,snapshot:((m=_.logprobs)==null?void 0:m.content)??[]}),((l=b.logprobs)==null?void 0:l.refusal)!=null&&((o=_.message)==null?void 0:o.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(i=b.logprobs)==null?void 0:i.refusal,snapshot:((p=_.logprobs)==null?void 0:p.refusal)??[]});const w=B(this,U,"m",ir).call(this,_);_.finish_reason&&(B(this,U,"m",ln).call(this,_),w.current_tool_call_index!=null&&B(this,U,"m",on).call(this,_,w.current_tool_call_index));for(const S of b.delta.tool_calls??[])w.current_tool_call_index!==S.index&&(B(this,U,"m",ln).call(this,_),w.current_tool_call_index!=null&&B(this,U,"m",on).call(this,_,w.current_tool_call_index)),w.current_tool_call_index=S.index;for(const S of b.delta.tool_calls??[]){const C=(g=_.message.tool_calls)==null?void 0:g[S.index];C!=null&&C.type&&((C==null?void 0:C.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(y=C.function)==null?void 0:y.name,index:S.index,arguments:C.function.arguments,parsed_arguments:C.function.parsed_arguments,arguments_delta:((v=S.function)==null?void 0:v.arguments)??""}):(C==null||C.type,void 0))}}},on=function(t,r){var c,h,f;if(B(this,U,"m",ir).call(this,t).done_tool_calls.has(r))return;const a=(c=t.message.tool_calls)==null?void 0:c[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const d=(f=(h=B(this,Se,"f"))==null?void 0:h.tools)==null?void 0:f.find(u=>u.type==="function"&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Pt(d)?d.$parseRaw(a.function.arguments):d!=null&&d.function.strict?JSON.parse(a.function.arguments):null})}else a.type},ln=function(t){var s,a;const r=B(this,U,"m",ir).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const c=B(this,U,"m",un).call(this);this._emit("content.done",{content:t.message.content,parsed:c?c.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(s=t.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},ar=function(){if(this.ended)throw new L("stream has ended, this shouldn't happen");const t=B(this,Pe,"f");if(!t)throw new L("request ended without sending any chunks");return Ge(this,Pe,void 0,"f"),Ge(this,Je,[],"f"),Mu(t,B(this,Se,"f"))},un=function(){var r;const t=(r=B(this,Se,"f"))==null?void 0:r.response_format;return On(t)?t:null},Pi=function(t){var r,s,a,c;let h=B(this,Pe,"f");const{choices:f,...d}=t;h?Object.assign(h,d):h=Ge(this,Pe,{...d,choices:[]},"f");for(const{delta:u,finish_reason:m,index:l,logprobs:o=null,...i}of t.choices){let p=h.choices[l];if(p||(p=h.choices[l]={finish_reason:m,index:l,message:{},logprobs:o,...i}),o)if(!p.logprobs)p.logprobs=Object.assign({},o);else{const{content:S,refusal:C,...k}=o;Object.assign(p.logprobs,k),S&&((r=p.logprobs).content??(r.content=[]),p.logprobs.content.push(...S)),C&&((s=p.logprobs).refusal??(s.refusal=[]),p.logprobs.refusal.push(...C))}if(m&&(p.finish_reason=m,B(this,Se,"f")&&La(B(this,Se,"f")))){if(m==="length")throw new fa;if(m==="content_filter")throw new da}if(Object.assign(p,i),!u)continue;const{content:g,refusal:y,function_call:v,role:b,tool_calls:_,...w}=u;if(Object.assign(p.message,w),y&&(p.message.refusal=(p.message.refusal||"")+y),b&&(p.message.role=b),v&&(p.message.function_call?(v.name&&(p.message.function_call.name=v.name),v.arguments&&((a=p.message.function_call).arguments??(a.arguments=""),p.message.function_call.arguments+=v.arguments)):p.message.function_call=v),g&&(p.message.content=(p.message.content||"")+g,!p.message.refusal&&B(this,U,"m",un).call(this)&&(p.message.parsed=xi(p.message.content))),_){p.message.tool_calls||(p.message.tool_calls=[]);for(const{index:S,id:C,type:k,function:A,...P}of _){const x=(c=p.message.tool_calls)[S]??(c[S]={});Object.assign(x,P),C&&(x.id=C),k&&(x.type=k),A&&(x.function??(x.function={name:A.name??"",arguments:""})),A!=null&&A.name&&(x.function.name=A.name),A!=null&&A.arguments&&(x.function.arguments+=A.arguments,ku(B(this,Se,"f"),x)&&(x.function.parsed_arguments=xi(x.function.arguments)))}}}return h},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,c)=>t.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new _e(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Mu(n,e){const{id:t,choices:r,created:s,model:a,system_fingerprint:c,...h}=n,f={...h,id:t,choices:r.map(({message:d,finish_reason:u,index:m,logprobs:l,...o})=>{if(!u)throw new L(`missing finish_reason for choice ${m}`);const{content:i=null,function_call:p,tool_calls:g,...y}=d,v=d.role;if(!v)throw new L(`missing role for choice ${m}`);if(p){const{arguments:b,name:_}=p;if(b==null)throw new L(`missing function_call.arguments for choice ${m}`);if(!_)throw new L(`missing function_call.name for choice ${m}`);return{...o,message:{content:i,function_call:{arguments:b,name:_},role:v,refusal:d.refusal??null},finish_reason:u,index:m,logprobs:l}}return g?{...o,index:m,finish_reason:u,logprobs:l,message:{...y,role:v,content:i,refusal:d.refusal??null,tool_calls:g.map((b,_)=>{const{function:w,type:S,id:C,...k}=b,{arguments:A,name:P,...x}=w||{};if(C==null)throw new L(`missing choices[${m}].tool_calls[${_}].id
${or(n)}`);if(S==null)throw new L(`missing choices[${m}].tool_calls[${_}].type
${or(n)}`);if(P==null)throw new L(`missing choices[${m}].tool_calls[${_}].function.name
${or(n)}`);if(A==null)throw new L(`missing choices[${m}].tool_calls[${_}].function.arguments
${or(n)}`);return{...k,id:C,type:S,function:{...x,name:P,arguments:A}}})}}:{...o,message:{...y,content:i,role:v,refusal:d.refusal??null},finish_reason:u,index:m,logprobs:l}}),created:s,model:a,object:"chat.completion",...c?{system_fingerprint:c}:{}};return Cu(f,e)}function or(n){return JSON.stringify(n)}class Ze extends wt{static fromReadableStream(e){const t=new Ze(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const s=new Ze(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,t,a)),s}static runTools(e,t,r){const s=new Ze(t),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,t,a)),s}}let ja=class extends O{parse(e,t){return Eu(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Mn(r,e))}runFunctions(e,t){return e.stream?Ze.runFunctions(this._client,e,t):yt.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Ze.runTools(this._client,e,t):yt.runTools(this._client,e,t)}stream(e,t){return wt.createChatCompletion(this._client,e,t)}};class xn extends O{constructor(){super(...arguments),this.completions=new ja(this._client)}}(function(n){n.Completions=ja})(xn||(xn={}));class Ka extends O{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Xa extends O{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Mr extends O{constructor(){super(...arguments),this.sessions=new Ka(this._client),this.transcriptionSessions=new Xa(this._client)}}Mr.Sessions=Ka;Mr.TranscriptionSessions=Xa;class Nn extends O{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,s){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},r){return H(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Tn,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Tn extends j{}Nn.MessagesPage=Tn;class Bn extends O{retrieve(e,t,r,s={},a){return H(s)?this.retrieve(e,t,r,{},s):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,r={},s){return H(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Dn,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Dn extends j{}Bn.RunStepsPage=Dn;let kt=class extends O{constructor(){super(...arguments),this.steps=new Bn(this._client)}create(e,t,r){const{include:s,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,s){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},r){return H(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Fn,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const s=await this.create(e,t,r);return await this.poll(e,s.id,r)}createAndStream(e,t,r){return he.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:c}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let h=5e3;if(r!=null&&r.pollIntervalMs)h=r.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(h=d)}}await Ct(h);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return he.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,s){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,s){const a=await this.submitToolOutputs(e,t,r,s);return await this.poll(e,a.id,s)}submitToolOutputsStream(e,t,r,s){return he.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,s)}};class Fn extends j{}kt.RunsPage=Fn;kt.Steps=Bn;kt.RunStepsPage=Dn;class tt extends O{constructor(){super(...arguments),this.runs=new kt(this._client),this.messages=new Nn(this._client)}create(e={},t){return H(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return he.createThreadAssistantStream(e,this._client.beta.threads,t)}}tt.Runs=kt;tt.RunsPage=Fn;tt.Messages=Nn;tt.MessagesPage=Tn;class rt extends O{constructor(){super(...arguments),this.realtime=new Mr(this._client),this.chat=new xn(this._client),this.assistants=new In(this._client),this.threads=new tt(this._client)}}rt.Realtime=Mr;rt.Assistants=In;rt.AssistantsPage=Ln;rt.Threads=tt;class Qa extends O{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class za extends O{create(e,t){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&Re("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...t});return r?a:(Re("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(c=>(c&&c.data&&c.data.forEach(h=>{const f=h.embedding;h.embedding=bu(f)}),c)))}}class qn extends O{retrieve(e,t,r,s){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,s)}list(e,t,r={},s){return H(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,Hn,{query:r,...s})}}class Hn extends j{}qn.OutputItemListResponsesPage=Hn;class Et extends O{constructor(){super(...arguments),this.outputItems=new qn(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return H(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,Un,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class Un extends j{}Et.RunListResponsesPage=Un;Et.OutputItems=qn;Et.OutputItemListResponsesPage=Hn;class At extends O{constructor(){super(...arguments),this.runs=new Et(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/evals",Wn,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class Wn extends j{}At.EvalListResponsesPage=Wn;At.Runs=Et;At.RunListResponsesPage=Un;let Vn=class extends O{create(e,t){return this._client.post("/files",et({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/files",Gn,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let c=await this.retrieve(e);for(;!c.status||!s.has(c.status);)if(await Ct(t),c=await this.retrieve(e),Date.now()-a>r)throw new kn({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return c}};class Gn extends j{}Vn.FileObjectsPage=Gn;class Ya extends O{}let Za=class extends O{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class Jn extends O{constructor(){super(...arguments),this.graders=new Za(this._client)}}Jn.Graders=Za;class $n extends O{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,jn,{body:t,method:"post",...r})}retrieve(e,t={},r){return H(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,r)}}class jn extends Rr{}$n.PermissionCreateResponsesPage=jn;let Nr=class extends O{constructor(){super(...arguments),this.permissions=new $n(this._client)}};Nr.Permissions=$n;Nr.PermissionCreateResponsesPage=jn;class Kn extends O{list(e,t={},r){return H(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Xn,{query:t,...r})}}class Xn extends j{}Kn.FineTuningJobCheckpointsPage=Xn;class nt extends O{constructor(){super(...arguments),this.checkpoints=new Kn(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Qn,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return H(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,zn,{query:t,...r})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class Qn extends j{}class zn extends j{}nt.FineTuningJobsPage=Qn;nt.FineTuningJobEventsPage=zn;nt.Checkpoints=Kn;nt.FineTuningJobCheckpointsPage=Xn;class Le extends O{constructor(){super(...arguments),this.methods=new Ya(this._client),this.jobs=new nt(this._client),this.checkpoints=new Nr(this._client),this.alpha=new Jn(this._client)}}Le.Methods=Ya;Le.Jobs=nt;Le.FineTuningJobsPage=Qn;Le.FineTuningJobEventsPage=zn;Le.Checkpoints=Nr;Le.Alpha=Jn;class eo extends O{}class Yn extends O{constructor(){super(...arguments),this.graderModels=new eo(this._client)}}Yn.GraderModels=eo;class to extends O{createVariation(e,t){return this._client.post("/images/variations",et({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",et({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Zn extends O{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",es,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class es extends Rr{}Zn.ModelsPage=es;class ro extends O{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function Nu(n,e){return!e||!Bu(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:no(n,e)}function no(n,e){const t=n.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:qu(e,s)};if(s.type==="message"){const a=s.content.map(c=>c.type==="output_text"?{...c,parsed:Tu(e,c.text)}:c);return{...s,content:a}}return s}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||so(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function Tu(n,e){var t,r,s,a;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((s=n.text)==null?void 0:s.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function Bu(n){var e;return!!On((e=n.text)==null?void 0:e.format)}function Du(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function Fu(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function qu(n,e){const t=Fu(n.tools??[],e.name);return{...e,...e,parsed_arguments:Du(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function so(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}class io extends O{list(e,t={},r){return H(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,Uu,{query:t,...r})}}var $e=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},ke=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},je,lr,Ee,ur,ki,Ei,Ai,Ri;class ts extends Rn{constructor(e){super(),je.add(this),lr.set(this,void 0),Ee.set(this,void 0),ur.set(this,void 0),$e(this,lr,e,"f")}static createResponse(e,t,r){const s=new ts(t);return s._run(()=>s._createResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createResponse(e,t,r){var c;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ke(this,je,"m",ki).call(this);const a=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const h of a)ke(this,je,"m",Ei).call(this,h);if((c=a.controller.signal)!=null&&c.aborted)throw new oe;return ke(this,je,"m",Ai).call(this)}[(lr=new WeakMap,Ee=new WeakMap,ur=new WeakMap,je=new WeakSet,ki=function(){this.ended||$e(this,Ee,void 0,"f")},Ei=function(t){if(this.ended)return;const r=ke(this,je,"m",Ri).call(this,t);switch(this._emit("event",t),t.type){case"response.output_text.delta":{const s=r.output[t.output_index];if(!s)throw new L(`missing output at index ${t.output_index}`);if(s.type==="message"){const a=s.content[t.content_index];if(!a)throw new L(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new L(`expected content to be 'output_text', got ${a.type}`);this._emit("response.output_text.delta",{...t,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const s=r.output[t.output_index];if(!s)throw new L(`missing output at index ${t.output_index}`);s.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...t,snapshot:s.arguments});break}default:this._emit(t.type,t);break}},Ai=function(){if(this.ended)throw new L("stream has ended, this shouldn't happen");const t=ke(this,Ee,"f");if(!t)throw new L("request ended without sending any events");$e(this,Ee,void 0,"f");const r=Hu(t,ke(this,lr,"f"));return $e(this,ur,r,"f"),r},Ri=function(t){let r=ke(this,Ee,"f");if(!r){if(t.type!=="response.created")throw new L(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=$e(this,Ee,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const s=r.output[t.output_index];if(!s)throw new L(`missing output at index ${t.output_index}`);s.type==="message"&&s.content.push(t.part);break}case"response.output_text.delta":{const s=r.output[t.output_index];if(!s)throw new L(`missing output at index ${t.output_index}`);if(s.type==="message"){const a=s.content[t.content_index];if(!a)throw new L(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new L(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const s=r.output[t.output_index];if(!s)throw new L(`missing output at index ${t.output_index}`);s.type==="function_call"&&(s.arguments+=t.delta);break}case"response.completed":{$e(this,Ee,t.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,c)=>t.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ke(this,ur,"f");if(!e)throw new L("stream ended without producing a ChatCompletion");return e}}function Hu(n,e){return Nu(n,e)}class rs extends O{constructor(){super(...arguments),this.inputItems=new io(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&so(r),r))}retrieve(e,t={},r){return H(t)?this.retrieve(e,{},t):this._client.get(`/responses/${e}`,{query:t,...r})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>no(r,e))}stream(e,t){return ts.createResponse(this._client,e,t)}}class Uu extends j{}rs.InputItems=io;class ao extends O{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,et({body:t,...r}))}}class ns extends O{constructor(){super(...arguments),this.parts=new ao(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}ns.Parts=ao;const Wu=async n=>{const e=await Promise.allSettled(n),t=e.filter(s=>s.status==="rejected");if(t.length){for(const s of t)console.error(s.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class Tr extends O{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,s){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},r){return H(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Br,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const s=await this.create(e,t,r);return await this.poll(e,s.id,r)}async poll(e,t,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...r,headers:s}).withResponse(),c=a.data;switch(c.status){case"in_progress":let h=5e3;if(r!=null&&r.pollIntervalMs)h=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(h=d)}}await Ct(h);break;case"failed":case"completed":return c}}}async upload(e,t,r){const s=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,t,r){const s=await this.upload(e,t,r);return await this.poll(e,s.id,r)}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,ss,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Br extends j{}class ss extends Rr{}Tr.VectorStoreFilesPage=Br;Tr.FileContentResponsesPage=ss;class oo extends O{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const s=await this.create(e,t);return await this.poll(e,s.id,r)}listFiles(e,t,r={},s){return H(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Br,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(e,t,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:c}=await this.retrieve(e,t,{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let h=5e3;if(r!=null&&r.pollIntervalMs)h=r.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(h=d)}}await Ct(h);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},s){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,c=Math.min(a,t.length),h=this._client,f=t.values(),d=[...r];async function u(l){for(let o of l){const i=await h.files.create({file:o,purpose:"assistants"},s);d.push(i.id)}}const m=Array(c).fill(f).map(u);return await Wu(m),await this.createAndPoll(e,{file_ids:d})}}class Oe extends O{constructor(){super(...arguments),this.files=new Tr(this._client),this.fileBatches=new oo(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/vector_stores",is,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,as,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class is extends j{}class as extends Rr{}Oe.VectorStoresPage=is;Oe.VectorStoreSearchResponsesPage=as;Oe.Files=Tr;Oe.VectorStoreFilesPage=Br;Oe.FileContentResponsesPage=ss;Oe.FileBatches=oo;var lo;class M extends uu{constructor({baseURL:e=nr("OPENAI_BASE_URL"),apiKey:t=nr("OPENAI_API_KEY"),organization:r=nr("OPENAI_ORG_ID")??null,project:s=nr("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new L("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const c={apiKey:t,organization:r,project:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&yu())throw new L(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:c.baseURL,timeout:c.timeout??6e5,httpAgent:c.httpAgent,maxRetries:c.maxRetries,fetch:c.fetch}),this.completions=new Qa(this),this.chat=new Or(this),this.embeddings=new za(this),this.files=new Vn(this),this.images=new to(this),this.audio=new xt(this),this.moderations=new ro(this),this.models=new Zn(this),this.fineTuning=new Le(this),this.graders=new Yn(this),this.vectorStores=new Oe(this),this.beta=new rt(this),this.batches=new En(this),this.uploads=new ns(this),this.responses=new rs(this),this.evals=new At(this),this._options=c,this.apiKey=t,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Jl(e,{arrayFormat:"brackets"})}}lo=M;M.OpenAI=lo;M.DEFAULT_TIMEOUT=6e5;M.OpenAIError=L;M.APIError=$;M.APIConnectionError=Pr;M.APIConnectionTimeoutError=kn;M.APIUserAbortError=oe;M.NotFoundError=oa;M.ConflictError=la;M.RateLimitError=ca;M.BadRequestError=sa;M.AuthenticationError=ia;M.InternalServerError=ha;M.PermissionDeniedError=aa;M.UnprocessableEntityError=ua;M.toFile=_a;M.fileFromPath=ta;M.Completions=Qa;M.Chat=Or;M.ChatCompletionsPage=Lr;M.Embeddings=za;M.Files=Vn;M.FileObjectsPage=Gn;M.Images=to;M.Audio=xt;M.Moderations=ro;M.Models=Zn;M.ModelsPage=es;M.FineTuning=Le;M.Graders=Yn;M.VectorStores=Oe;M.VectorStoresPage=is;M.VectorStoreSearchResponsesPage=as;M.Beta=rt;M.Batches=En;M.BatchesPage=An;M.Uploads=ns;M.Responses=rs;M.Evals=At;M.EvalListResponsesPage=Wn;const Vu=new M({apiKey:"9cae4f82f3814110bf94608105a4af135680729b8a4a207098bd76b9e04e3235",baseURL:"https://api.together.xyz/v1",dangerouslyAllowBrowser:!0});var vr=(n=>(n[n.WaitingForPrompt=0]="WaitingForPrompt",n[n.Submitting=1]="Submitting",n[n.QuestionEnded=2]="QuestionEnded",n))(vr||{});const D=Ti({questionSet:"",question:"",chatDisplay:[],questionNum:0,totalQuestions:0,mode:0,hasNextQuestion:!1});var G={json:null,systemPromptFunc:null,questionIndex:0,chatMessages:[]};async function os(n){G.json=null,D.questionSet=n,G.questionIndex=0,await uo()}async function uo(){if(G.json==null&&(G.json=await(await fetch(`/${D.questionSet}_questions.json`)).json(),G.systemPromptFunc=Tl.compile(G.json.system.prompt),D.totalQuestions=G.json.questions.length),G.systemPromptFunc==null)return;var n=G.json.questions[G.questionIndex];G.questionIndex+=1,D.questionNum=G.questionIndex,D.hasNextQuestion=D.questionNum<D.totalQuestions,D.question=n.display??n.question,D.chatDisplay=[],D.mode=0;let e=G.systemPromptFunc(n);G.chatMessages=[{role:"system",content:e}]}function Ii(n,e){n.length>0?n[n.length-1]=e:n.push(e)}async function Gu(n){var a,c;D.mode=1;let e={role:"user",content:n};G.chatMessages.push(e),D.chatDisplay.push(e);const t=await Vu.chat.completions.create({model:"meta-llama/Llama-3.3-70B-Instruct-Turbo-Free",messages:G.chatMessages,stream:!0});let r={role:"assistant",content:""};G.chatMessages.push(r),D.chatDisplay.push(r);var s="";for await(const h of t){let f=((c=(a=h.choices[0])==null?void 0:a.delta)==null?void 0:c.content)||"";s+=f,r.content=s,Ii(G.chatMessages,r),Ii(D.chatDisplay,r)}D.mode=s.endsWith("DONE")?2:0}const bt=Ti({listening:!1,hasSpeech:!1});var xe=null;function Ju(n){if(xe!=null)return;const e=window.SpeechRecognition||window.webkitSpeechRecognition;console.log(`initSpeech ${e}`),e&&(xe=new e,xe.continuous=!0,xe.lang="en-US",xe.interimResults=!0,xe.onresult=t=>{let r=Array.from(t.results).map(s=>s[0].transcript).join(" ");n(r)},xe.onerror=t=>{console.error("Error occurred in recognition:",t.error)},bt.hasSpeech=!0)}function cn(){bt.listening=!0,xe.start()}function yr(){bt.listening=!1,xe.stop()}async function $u(n,e,t){var r;yr(),Te(e,""),await uo(),(r=ae(t))==null||r.focus()}function ju(n,e){n.key==="Enter"&&e()}var Ku=n=>os("dsa"),Xu=n=>os("p6science"),Qu=Ie('<div class="card p-3 text-end" style="background-color: #f0f0f0;"><p> </p></div>'),zu=Ie('<div class="p-3"><p> </p></div>'),Yu=Ie('<div class="mt-3"><input type="text" id="prompt-text" class="form-control" placeholder="Prompt"></div>'),Zu=Ie('<button class="btn btn-secondary mt-3" type="button">ð¤ Start Listening</button>'),ec=Ie('<button class="btn btn-danger mt-3" type="button">Stop Listening</button>'),tc=Ie('<button class="btn btn-primary mt-3" type="button">Submit</button> <!>',1),rc=Ie('<button class="btn btn-success mt-3 float-end" type="button">Next Question</button>'),nc=Ie('<div class="container mt-5"><ul class="nav nav-tabs"><li class="nav-item"><button>Data Structures</button></li> <li class="nav-item"><button>PSLE Science</button></li></ul> <div class="card p-4 shadow"><h3 class="mb-3"> </h3> <div><!></div></div> <div></div> <!> <div><!> <!></div> <div class="m-3"></div></div>');function bc(n,e){Ho(e,!0);let t=Rt(void 0),r=Rt(""),s=Rt(void 0);ho(()=>{Ju(I=>{Te(r,I,!0)}),os("dsa")});function a(){var I;(I=ae(s))==null||I.scrollIntoView({behavior:"smooth",block:"end"})}Uo(()=>{D.chatDisplay.length,a()});async function c(){var T;let I=ae(r);I.trim().length!=0&&(Te(r,""),await Gu(I),a(),(T=ae(t))==null||T.focus())}let h=Rt(void 0);var f=nc(),d=te(f),u=te(d),m=te(u);let l;m.__click=[Ku],X(u);var o=we(u,2),i=te(o);let p;i.__click=[Xu],X(o),X(d);var g=we(d,2),y=te(g),v=te(y);X(y);var b=we(y,2),_=te(b);zo(_,()=>D.question),X(b),X(g);var w=we(g,2);Ko(w,21,()=>D.chatDisplay,$o,(I,T)=>{var F=us(),ee=Ur(F);{var Dr=ve=>{var ye=Qu(),Me=te(ye),it=te(Me,!0);X(Me),X(ye),hr(()=>Wr(it,ae(T).content)),de(ve,ye)},st=ve=>{var ye=zu(),Me=te(ye),it=te(Me,!0);X(Me),X(ye),hr(()=>Wr(it,ae(T).content)),de(ve,ye)};He(ee,ve=>{ae(T).role=="user"?ve(Dr):ve(st,!1)})}de(I,F)}),X(w),Vr(w,I=>Te(h,I),()=>ae(h));var S=we(w,2);{var C=I=>{var T=Yu(),F=te(T);tl(F),F.__keydown=[ju,c],Vr(F,ee=>Te(t,ee),()=>ae(t)),X(T),nl(F,()=>ae(r),ee=>Te(r,ee)),de(I,T)};He(S,I=>{D.mode==vr.WaitingForPrompt&&I(C)})}var k=we(S,2),A=te(k);{var P=I=>{var T=tc(),F=Ur(T);F.__click=c;var ee=we(F,2);{var Dr=st=>{var ve=us(),ye=Ur(ve);{var Me=qe=>{var at=Zu();at.__click=function(...Fr){cn==null||cn.apply(this,Fr)},de(qe,at)},it=qe=>{var at=ec();at.__click=function(...Fr){yr==null||yr.apply(this,Fr)},de(qe,at)};He(ye,qe=>{bt.listening?qe(it,!1):qe(Me)})}de(st,ve)};He(ee,st=>{bt.hasSpeech&&st(Dr)})}de(I,T)};He(A,I=>{D.mode==vr.WaitingForPrompt&&I(P)})}var x=we(A,2);{var E=I=>{var T=rc();T.__click=[$u,r,t],de(I,T)};He(x,I=>{D.mode!=vr.Submitting&&D.hasNextQuestion&&I(E)})}X(k);var N=we(k,2);Vr(N,I=>Te(s,I),()=>ae(s)),X(f),hr((I,T)=>{l=_s(m,1,"nav-link",null,l,I),p=_s(i,1,"nav-link",null,p,T),Wr(v,`Question ${D.questionNum??""} / ${D.totalQuestions??""}`)},[()=>({active:D.questionSet=="dsa"}),()=>({active:D.questionSet=="p6science"})]),de(n,f),Wo()}Vo(["click","keydown"]);export{bc as component};
